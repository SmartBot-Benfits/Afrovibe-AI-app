<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AfroVibe AI - Professional Afrobeat Music Platform</title>
  <meta name="description" content="Create authentic Afrobeat music with AI-powered tools. Join thousands of artists worldwide in the ultimate Afrobeat music creation platform.">
  <meta name="keywords" content="Afrobeat, AI Music, Music Production, African Music, Beat Generation">
  <meta name="author" content="AfroVibe AI">
  
  <!-- Open Graph Tags -->
  <meta property="og:title" content="AfroVibe AI - Professional Afrobeat Music Platform">
  <meta property="og:description" content="Create authentic Afrobeat music with AI-powered tools">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://afrovibe.ai">
  <meta property="og:image" content="https://afrovibe.ai/og-image.jpg">
  
  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AfroVibe AI - Professional Afrobeat Music Platform">
  <meta name="twitter:description" content="Create authentic Afrobeat music with AI-powered tools">
  <meta name="twitter:image" content="https://afrovibe.ai/twitter-image.jpg">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="#" id="manifestPlaceholder">
  
  <!-- Icons -->
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéµ</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéµ</text></svg>">
  
  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/music_rnn.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/music_vae.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/sequences.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-orange: #ff9f1c;
      --primary-gold: #ffbf69;
      --primary-crimson: #dc143c;
      --primary-indigo: #302b63;
      --dark-bg: #0f0c29;
      --card-bg: rgba(255, 255, 255, 0.05);
      --border-glow: rgba(255, 159, 28, 0.3);
      --text-light: #fff;
      --text-secondary: #b8b8b8;
      --success: #88cc88;
      --warning: #ffbf69;
      --error: #ff6b6b;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--dark-bg), var(--primary-indigo), #24243e);
      color: var(--text-light);
      overflow-x: hidden;
      scroll-behavior: smooth;
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      body { filter: brightness(0.9); }
    }

    /* Navigation */
    nav {
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(20px);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 999;
      display: flex;
      justify-content: space-between;
      padding: 1rem 2rem;
      align-items: center;
      border-bottom: 2px solid var(--primary-orange);
      transition: all 0.3s ease;
    }

    nav.scrolled {
      background: rgba(0, 0, 0, 0.95);
      padding: 0.8rem 2rem;
    }

    nav .logo {
      font-size: 1.8rem;
      font-weight: bold;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    nav .logo:hover {
      transform: scale(1.05);
      filter: drop-shadow(0 0 10px var(--primary-orange));
    }

    nav ul {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    nav ul li a {
      color: var(--text-light);
      text-decoration: none;
      transition: all 0.3s ease;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      position: relative;
      font-weight: 500;
    }

    nav ul li a:hover, nav ul li a.active {
      color: var(--primary-orange);
      background: rgba(255, 159, 28, 0.1);
      box-shadow: 0 0 15px rgba(255, 159, 28, 0.3);
    }

    nav .user-menu {
      position: relative;
      display: none;
    }

    nav .user-menu.logged-in {
      display: block;
    }

    nav .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    nav .user-avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px var(--primary-orange);
    }

    /* Mobile Navigation */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.5rem;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn { display: block; }
      nav ul { 
        display: none; 
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.95);
        flex-direction: column;
        padding: 1rem;
      }
      nav ul.mobile-open { display: flex; }
    }

    /* Page Container */
    .page {
      display: none;
      min-height: 100vh;
      padding-top: 100px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    .page.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
    }

    .loading-overlay.active {
      display: flex;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid var(--border-glow);
      border-top-color: var(--primary-orange);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 2rem;
      position: relative;
      background: radial-gradient(circle at center, rgba(255, 159, 28, 0.1) 0%, transparent 70%);
    }

    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 5rem);
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold), var(--primary-crimson));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1.5rem;
      animation: glow 3s ease-in-out infinite alternate;
      line-height: 1.2;
    }

    @keyframes glow {
      from { filter: drop-shadow(0 0 20px var(--primary-orange)); }
      to { filter: drop-shadow(0 0 40px var(--primary-crimson)); }
    }

    .hero p {
      font-size: 1.4rem;
      margin-bottom: 3rem;
      max-width: 700px;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    /* Music Visualizer */
    .music-visualizer {
      display: flex;
      justify-content: center;
      align-items: end;
      gap: 3px;
      height: 100px;
      margin: 3rem 0;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 20px;
      border: 1px solid var(--border-glow);
    }

    .bar {
      width: 5px;
      background: linear-gradient(to top, var(--primary-orange), var(--primary-gold));
      border-radius: 3px;
      animation: dance 0.8s ease-in-out infinite alternate;
      filter: drop-shadow(0 0 5px var(--primary-orange));
    }

    .bar:nth-child(odd) { animation-delay: 0.1s; }
    .bar:nth-child(even) { animation-delay: 0.3s; }
    .bar:nth-child(3n) { animation-delay: 0.5s; }

    @keyframes dance {
      0% { height: 15px; }
      100% { height: 70px; }
    }

    /* Buttons */
    .btn {
      padding: 1rem 2rem;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 30px;
      cursor: pointer;
      margin: 0.5rem;
      transition: all 0.3s ease;
      font-size: 1rem;
      box-shadow: 0 4px 15px rgba(255, 159, 28, 0.3);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(255, 159, 28, 0.5);
    }

    .btn:active {
      transform: translateY(-1px) scale(1.02);
    }

    .btn-secondary {
      background: linear-gradient(45deg, var(--primary-crimson), #ff6b6b);
    }

    .btn-dark {
      background: linear-gradient(45deg, #2c2c54, #40407a);
    }

    .btn-success {
      background: linear-gradient(45deg, var(--success), #66bb6a);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Sections */
    section {
      padding: 4rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section-title {
      text-align: center;
      font-size: 2.8rem;
      margin-bottom: 4rem;
      background: linear-gradient(45deg, var(--primary-gold), var(--primary-orange));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      position: relative;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      border-radius: 2px;
    }

    /* Grid Layouts */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .grid-2 {
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    }

    .grid-3 {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border: 2px solid var(--border-glow);
      padding: 2rem;
      border-radius: 20px;
      text-align: center;
      transition: all 0.4s ease;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.05), rgba(220, 20, 60, 0.05));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .card:hover::before {
      opacity: 1;
    }

    .card:hover {
      transform: translateY(-15px) rotateX(2deg);
      box-shadow: 0 25px 50px rgba(255, 159, 28, 0.3);
      border-color: var(--primary-orange);
    }

    .card h3 {
      color: var(--primary-gold);
      margin-bottom: 1rem;
      font-size: 1.3rem;
    }

    .card p {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    /* Studio Interface */
    .studio-container {
      background: rgba(0, 0, 0, 0.4);
      padding: 3rem;
      border-radius: 25px;
      margin: 2rem 0;
      border: 2px solid var(--border-glow);
    }

    .studio-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .studio-title {
      font-size: 1.8rem;
      color: var(--primary-gold);
    }

    .studio-status {
      padding: 0.5rem 1rem;
      background: rgba(136, 204, 136, 0.2);
      border: 1px solid var(--success);
      border-radius: 20px;
      color: var(--success);
      font-size: 0.9rem;
    }

    .studio-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .control-group {
      background: rgba(255, 255, 255, 0.05);
      padding: 1.5rem;
      border-radius: 15px;
      border: 1px solid var(--border-glow);
    }

    .control-group h4 {
      color: var(--primary-orange);
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    /* Waveform Display */
    .waveform-container {
      background: rgba(0, 0, 0, 0.6);
      padding: 2rem;
      border-radius: 15px;
      margin: 2rem 0;
      border: 2px solid var(--border-glow);
      position: relative;
      overflow: hidden;
    }

    .waveform {
      height: 120px;
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.1), rgba(220, 20, 60, 0.1));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .waveform-bars {
      display: flex;
      align-items: end;
      gap: 2px;
      height: 80px;
    }

    .waveform-bar {
      width: 3px;
      background: linear-gradient(to top, var(--primary-orange), var(--primary-gold));
      border-radius: 2px;
      transition: height 0.3s ease;
    }

    .waveform-animation {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, 
        transparent 0%, 
        rgba(255, 159, 28, 0.4) 50%, 
        transparent 100%);
      animation: wave 2s linear infinite;
      display: none;
    }

    @keyframes wave {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Output Logs */
    .output-section {
      background: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 15px;
      margin: 2rem 0;
      border: 1px solid var(--border-glow);
    }

    .output-logs {
      background: rgba(0, 0, 0, 0.8);
      padding: 1rem;
      border-radius: 10px;
      height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      border: 1px solid var(--primary-orange);
    }

    .output-logs::-webkit-scrollbar {
      width: 8px;
    }

    .output-logs::-webkit-scrollbar-track {
      background: rgba(255, 159, 28, 0.1);
      border-radius: 4px;
    }

    .output-logs::-webkit-scrollbar-thumb {
      background: var(--primary-orange);
      border-radius: 4px;
    }

    /* Artist Profiles */
    .artist-card {
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.1), rgba(220, 20, 60, 0.1));
      padding: 2rem;
      border-radius: 20px;
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid var(--border-glow);
      position: relative;
    }

    .artist-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(255, 159, 28, 0.3);
    }

    .artist-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      margin: 0 auto 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      border: 3px solid var(--primary-gold);
      position: relative;
    }

    .artist-status {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 20px;
      height: 20px;
      background: var(--success);
      border-radius: 50%;
      border: 2px solid white;
    }

    .artist-stats {
      display: flex;
      justify-content: space-around;
      margin: 1rem 0;
      font-size: 0.9rem;
    }

    .stat {
      text-align: center;
    }

    .stat-number {
      font-weight: bold;
      color: var(--primary-orange);
      font-size: 1.2rem;
    }

    .stat-label {
      color: var(--text-secondary);
    }

    /* Dashboard */
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .dashboard-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      background: rgba(0, 0, 0, 0.3);
      padding: 0.5rem;
      border-radius: 25px;
      border: 1px solid var(--border-glow);
    }

    .tab {
      padding: 1rem 2rem;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      margin: 0.5rem;
      border-radius: 20px;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .tab.active {
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      color: white;
      box-shadow: 0 4px 15px rgba(255, 159, 28, 0.3);
    }

    .dashboard-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .dashboard-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Project Cards */
    .project-card {
      background: var(--card-bg);
      padding: 1.5rem;
      border-radius: 15px;
      border: 2px solid var(--border-glow);
      transition: all 0.3s ease;
      position: relative;
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .project-title {
      font-size: 1.2rem;
      color: var(--primary-gold);
    }

    .project-status {
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .status-complete {
      background: rgba(136, 204, 136, 0.2);
      color: var(--success);
      border: 1px solid var(--success);
    }

    .status-progress {
      background: rgba(255, 191, 105, 0.2);
      color: var(--warning);
      border: 1px solid var(--warning);
    }

    .status-draft {
      background: rgba(255, 107, 107, 0.2);
      color: var(--error);
      border: 1px solid var(--error);
    }

    .project-meta {
      display: flex;
      justify-content: space-between;
      margin: 1rem 0;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .project-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }

    /* Search and Filters */
    .search-container {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-input {
      flex: 1;
      min-width: 250px;
      padding: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      font-size: 16px;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary-orange);
      box-shadow: 0 0 20px rgba(255, 159, 28, 0.3);
    }

    .filter-dropdown {
      padding: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      cursor: pointer;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: modalFadeIn 0.3s ease;
    }

    .modal.active {
      display: flex;
    }

    @keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #2c2c54);
      padding: 3rem;
      border-radius: 25px;
      width: 90%;
      max-width: 500px;
      position: relative;
      border: 2px solid var(--primary-orange);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from { transform: translateY(-50px) scale(0.9); }
      to { transform: translateY(0) scale(1); }
    }

    .modal h3 {
      margin-bottom: 2rem;
      color: var(--primary-gold);
      text-align: center;
      font-size: 1.8rem;
    }

    .modal input {
      width: 100%;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .modal input:focus {
      outline: none;
      border-color: var(--primary-orange);
      box-shadow: 0 0 20px rgba(255, 159, 28, 0.3);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 2rem;
      color: var(--primary-orange);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .close-btn:hover {
      transform: scale(1.2);
      color: var(--primary-gold);
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: 100px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      z-index: 3000;
      animation: notificationSlide 0.3s ease;
      max-width: 300px;
    }

    .notification.success {
      background: linear-gradient(45deg, var(--success), #66bb6a);
      border: 1px solid var(--success);
    }

    .notification.warning {
      background: linear-gradient(45deg, var(--warning), #ffa726);
      border: 1px solid var(--warning);
    }

    .notification.error {
      background: linear-gradient(45deg, var(--error), #ef5350);
      border: 1px solid var(--error);
    }

    @keyframes notificationSlide {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Progress Bars */
    .progress-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 0.3rem;
      margin: 1rem 0;
    }

    .progress-bar {
      height: 8px;
      border-radius: 5px;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      transition: width 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: progressShine 2s linear infinite;
    }

    @keyframes progressShine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 3rem 2rem;
      background: linear-gradient(135deg, #000, #1a1a1a);
      color: var(--text-secondary);
      border-top: 2px solid var(--primary-orange);
      margin-top: 4rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--primary-orange);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .studio-controls {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
      
      .dashboard-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-container {
        flex-direction: column;
      }
      
      .search-input {
        min-width: auto;
      }
    }

    @media (max-width: 480px) {
      section {
        padding: 2rem 1rem;
      }
      
      .grid {
        grid-template-columns: 1fr;
      }
      
      nav {
        padding: 1rem;
      }
      
      .modal-content {
        padding: 2rem;
        width: 95%;
      }
    }
  </style>
</head>
<body>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div>
      <div class="loading-spinner"></div>
      <p style="margin-top: 1rem; color: var(--primary-orange);">Loading AfroVibe AI...</p>
    </div>
  </div>

  <!-- Navigation -->
  <nav id="navbar">
    <div class="logo" onclick="showPage('home')">AfroVibe AI</div>
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
      <i class="fas fa-bars"></i>
    </button>
    <ul id="navMenu">
      <li><a href="#" onclick="showPage('home')" class="nav-link active">üè† Home</a></li>
      <li><a href="#" onclick="showPage('studio')" class="nav-link">üéµ Studio</a></li>
      <li><a href="#" onclick="showPage('community')" class="nav-link">üåç Community</a></li>
      <li><a href="#" onclick="showPage('learn')" class="nav-link">üéì Learn</a></li>
      <li><a href="#" onclick="showPage('dashboard')" class="nav-link">üìä Dashboard</a></li>
      <li><a href="#" onclick="showPage('profile')" class="nav-link">üë§ Profile</a></li>
      <li><a href="#" onclick="openModal()" id="authBtn">üîê Login</a></li>
    </ul>
    <div class="user-menu" id="userMenu">
      <div class="user-avatar" onclick="toggleUserMenu()">
        <span id="userInitials">U</span>
      </div>
    </div>
  </nav>

  <!-- HOME PAGE -->
  <div id="home" class="page active">
    <section class="hero">
      <h1>Unleash Afrobeat Creativity with AI</h1>
      <p>Join the next-generation Afrobeat music revolution. Collaborate with artists worldwide, learn from masters, and create groundbreaking tracks with AI-powered tools that understand the soul of African rhythms.</p>
      
      <div class="music-visualizer" id="heroVisualizer">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
      </div>

      <div>
        <button class="btn" onclick="showPage('studio')">üéµ Try Studio Now</button>
        <button class="btn btn-secondary" onclick="openModal()">üöÄ Join Free</button>
        <button class="btn btn-dark" onclick="showPage('learn')">üìö Learn More</button>
      </div>
    </section>

    <section>
      <h2 class="section-title">‚ú® Platform Features</h2>
      <div class="grid grid-3">
        <div class="card">
          <i class="fas fa-robot" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>AI Beat Generator</h3>
          <p>Create authentic Afrobeat rhythms with our advanced AI that understands traditional patterns, polyrhythms, and modern fusion styles.</p>
          <button class="btn btn-small" onclick="showPage('studio')">Try Now</button>
        </div>
        <div class="card">
          <i class="fas fa-users" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Global Community</h3>
          <p>Connect with over 10,000+ Afrobeat artists worldwide. Collaborate in real-time and share your musical journey.</p>
          <button class="btn btn-small" onclick="showPage('community')">Explore</button>
        </div>
        <div class="card">
          <i class="fas fa-graduation-cap" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Learn from Masters</h3>
          <p>Access exclusive courses from legendary Afrobeat producers, musicians, and modern innovators in the genre.</p>
          <button class="btn btn-small" onclick="showPage('learn')">Start Learning</button>
        </div>
        <div class="card">
          <i class="fas fa-chart-line" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Analytics Dashboard</h3>
          <p>Track your music's performance, audience engagement, and grow your fanbase with detailed insights and recommendations.</p>
          <button class="btn btn-small" onclick="showPage('dashboard')">View Stats</button>
        </div>
        <div class="card">
          <i class="fas fa-cloud" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Cloud Studio</h3>
          <p>Work from anywhere with our cloud-based studio. Your projects are always saved and accessible across all devices.</p>
          <button class="btn btn-small" onclick="showPage('studio')">Open Studio</button>
        </div>
        <div class="card">
          <i class="fas fa-share-alt" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Instant Sharing</h3>
          <p>Share your creations instantly to all major platforms. Get discovered and build your audience effortlessly.</p>
          <button class="btn btn-small" onclick="handleShare()">Share Now</button>
        </div>
      </div>
    </section>

    <section>
      <h2 class="section-title">üéØ Getting Started</h2>
      <div class="grid grid-2">
        <div class="card">
          <h3>For Beginners</h3>
          <p>New to Afrobeat? Start with our beginner-friendly tutorials and AI-assisted creation tools.</p>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>‚úì Interactive rhythm tutorials</li>
            <li>‚úì AI-guided beat creation</li>
            <li>‚úì Community mentorship</li>
            <li>‚úì Free starter samples</li>
          </ul>
          <button class="btn" onclick="showPage('learn')">Start Journey</button>
        </div>
        <div class="card">
          <h3>For Professionals</h3>
          <p>Advanced tools for professional producers and established artists looking to innovate.</p>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>‚úì Professional mixing suite</li>
            <li>‚úì Advanced AI features</li>
            <li>‚úì Collaboration tools</li>
            <li>‚úì Distribution network</li>
          </ul>
          <button class="btn btn-secondary" onclick="showPage('studio')">Enter Studio</button>
        </div>
      </div>
    </section>
  </div>

  <!-- STUDIO PAGE -->
  <div id="studio" class="page">
    <section>
      <h2 class="section-title">üéß AI Music Studio</h2>
      
      <div class="studio-container">
        <div class="studio-header">
          <div class="studio-title">AfroVibe Studio v2.0</div>
          <div class="studio-status" id="studioStatus">Ready to Create</div>
        </div>

        <div class="studio-controls">
          <div class="control-group">
            <h4>ü•Å Rhythm Section</h4>
            <button class="btn btn-small" onclick="generateAIBeat()">ü§ñ AI Beat</button>
            <button class="btn btn-small" onclick="studioAction('generateBeat')">Generate Beat</button>
            <button class="btn btn-small" onclick="studioAction('addPercussion')">Add Percussion</button>
          </div>
          
          <div class="control-group">
            <h4>üéπ Melody & Harmony</h4>
            <button class="btn btn-small" onclick="generateAIMelody()">ü§ñ AI Melody</button>
            <button class="btn btn-small" onclick="studioAction('addMelody')">Add Melody</button>
            <button class="btn btn-small" onclick="studioAction('addBass')">Add Bass</button>
          </div>
          
          <div class="control-group">
            <h4>üé§ Vocals & Effects</h4>
            <button class="btn btn-small" onclick="studioAction('recordVocal')">Record Vocal</button>
            <button class="btn btn-small" onclick="studioAction('addEffects')">Add Effects</button>
          </div>
          
          <div class="control-group">
            <h4>‚ö° AI Tools</h4>
            <button class="btn btn-small" onclick="studioAction('aiSuggest')">AI Suggest</button>
            <button class="btn btn-small" onclick="studioAction('autoMix')">Auto Mix</button>
          </div>

          <div class="control-group">
            <h4>‚ñ∂Ô∏è Playback</h4>
            <button class="btn btn-secondary btn-small" onclick="studioAction('play')" id="playBtn">Play</button>
            <button class="btn btn-dark btn-small" onclick="studioAction('pause')" id="pauseBtn">Pause</button>
          </div>
          
          <div class="control-group">
            <h4>üíæ Export & Share</h4>
            <button class="btn btn-small" onclick="studioAction('export')">Export</button>
            <button class="btn btn-success btn-small" onclick="studioAction('share')">Share</button>
          </div>
        </div>

        <div class="waveform-container">
          <h4 style="margin-bottom: 1rem; color: var(--primary-gold);">üéµ Track Visualization</h4>
          <div class="waveform" id="waveform">
            <div class="waveform-animation" id="waveAnimation"></div>
            <div class="waveform-bars" id="waveformBars">
              <!-- Waveform bars will be generated by JavaScript -->
            </div>
            <span id="waveformText" style="position: absolute; z-index: 10;">üéµ Your masterpiece will appear here</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
            <span style="color: var(--text-secondary);">Duration: <span id="trackDuration">00:00</span></span>
            <span style="color: var(--text-secondary);">BPM: <span id="trackBPM">120</span></span>
            <span style="color: var(--text-secondary);">Key: <span id="trackKey">A Minor</span></span>
          </div>
        </div>

        <div class="output-section">
          <h4 style="margin-bottom: 1rem; color: var(--primary-gold);">üìÑ Studio Activity Log</h4>
          <div class="output-logs" id="outputLogs">
            <div style="color: var(--primary-orange);">[12:34:56] System initialized - AfroVibe Studio v2.0</div>
            <div style="color: var(--success);">[12:34:57] AI engine loaded - Traditional Afrobeat patterns ready</div>
            <div style="color: var(--success);">[12:34:58] Studio ready - Start creating your next hit!</div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
          <button class="btn" onclick="saveProject()">üíæ Save Project</button>
          <button class="btn btn-secondary" onclick="newProject()">üÜï New Project</button>
          <button class="btn btn-dark" onclick="loadProject()">üìÇ Load Project</button>
        </div>
      </div>
    </section>
  </div>

  <!-- COMMUNITY PAGE -->
  <div id="community" class="page">
    <section>
      <h2 class="section-title">üåç Global Artist Community</h2>
      
      <div class="search-container">
        <input type="text" class="search-input" placeholder="üîç Search artists, tracks, or genres..." onkeyup="searchArtists(this.value)">
        <select class="filter-dropdown" onchange="filterArtists(this.value)">
          <option value="all">All Regions</option>
          <option value="africa">Africa</option>
          <option value="europe">Europe</option>
          <option value="americas">Americas</option>
          <option value="asia">Asia & Oceania</option>
        </select>
        <button class="btn" onclick="joinCommunity()">ü§ù Join Community</button>
      </div>

      <div class="grid" id="artistGrid">
        <!-- Artists will be populated by JavaScript -->
      </div>

      <div style="text-align: center; margin-top: 3rem;">
        <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">üéâ Community Stats</h3>
        <div class="grid grid-3">
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">12,547</h3>
            <p>Active Artists</p>
          </div>
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">45,892</h3>
            <p>Tracks Created</p>
          </div>
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">89</h3>
            <p>Countries</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- LEARN PAGE -->
  <div id="learn" class="page">
    <section>
      <h2 class="section-title">üéì Learn Afrobeat Mastery</h2>
      
      <div class="search-container">
        <input type="text" class="search-input" placeholder="üîç Search courses..." onkeyup="searchCourses(this.value)">
        <select class="filter-dropdown" onchange="filterCourses(this.value)">
          <option value="all">All Levels</option>
          <option value="beginner">Beginner</option>
          <option value="intermediate">Intermediate</option>
          <option value="advanced">Advanced</option>
        </select>
      </div>

      <div class="grid" id="coursesGrid">
        <!-- Courses will be populated by JavaScript -->
      </div>

      <div style="margin-top: 4rem;">
        <h3 class="section-title">üéØ Learning Paths</h3>
        <div class="grid grid-2">
          <div class="card">
            <h3>üéµ Producer Path</h3>
            <p>Complete journey from beginner to professional Afrobeat producer</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            <p style="margin: 1rem 0;">6 Courses ‚Ä¢ 24 weeks ‚Ä¢ Certificate included</p>
            <button class="btn" onclick="startLearningPath('producer')">Start Path</button>
          </div>
          <div class="card">
            <h3>üé§ Artist Path</h3>
            <p>Master vocal techniques, songwriting, and performance skills</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            <p style="margin: 1rem 0;">5 Courses ‚Ä¢ 20 weeks ‚Ä¢ Certificate included</p>
            <button class="btn" onclick="startLearningPath('artist')">Start Path</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- DASHBOARD PAGE -->
  <div id="dashboard" class="page">
    <section>
      <div class="dashboard-header">
        <h2 class="section-title">üìä Your Creative Dashboard</h2>
        <button class="btn" onclick="showPage('studio')">üéµ Create New Track</button>
      </div>
      
      <div class="dashboard-tabs">
        <button class="tab active" onclick="showDashboardTab('overview')">üìà Overview</button>
        <button class="tab" onclick="showDashboardTab('projects')">üéµ My Projects</button>
        <button class="tab" onclick="showDashboardTab('collaborations')">ü§ù Collaborations</button>
        <button class="tab" onclick="showDashboardTab('analytics')">üìä Analytics</button>
      </div>

      <div id="overview" class="dashboard-content active">
        <div class="grid grid-3">
          <div class="card">
            <h3>Total Streams</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">124.7K</h2>
            <p style="color: var(--success);">+23% this week</p>
          </div>
          <div class="card">
            <h3>Active Projects</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">8</h2>
            <p style="color: var(--warning);">2 pending review</p>
          </div>
          <div class="card">
            <h3>Community Rank</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">#247</h2>
            <p style="color: var(--success);">Rising star!</p>
          </div>
        </div>

        <div style="margin-top: 3rem;">
          <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">üéØ Recent Activity</h3>
          <div class="grid grid-2">
            <div class="card">
              <h4>üéµ Latest Track Performance</h4>
              <p><strong>"Lagos Nights"</strong> - Released 2 days ago</p>
              <div class="progress-container">
                <div class="progress-bar" style="width: 78%"></div>
              </div>
              <p>2,450 plays ‚Ä¢ 89 likes ‚Ä¢ 23 shares</p>
            </div>
            <div class="card">
              <h4>üèÜ Achievements</h4>
              <p>üéñÔ∏è <strong>Beat Master</strong> - Created 10 beats this month</p>
              <p>üåü <strong>Community Star</strong> - Top 5% engagement</p>
              <p>üéì <strong>Quick Learner</strong> - Completed 3 courses</p>
            </div>
          </div>
        </div>
      </div>

      <div id="projects" class="dashboard-content">
        <div class="search-container">
          <input type="text" class="search-input" placeholder="üîç Search your projects..." onkeyup="searchProjects(this.value)">
          <select class="filter-dropdown" onchange="filterProjects(this.value)">
            <option value="all">All Status</option>
            <option value="complete">Complete</option>
            <option value="progress">In Progress</option>
            <option value="draft">Draft</option>
          </select>
        </div>
        <div class="grid" id="projectsGrid">
          <!-- Projects will be populated by JavaScript -->
        </div>
      </div>

      <div id="collaborations" class="dashboard-content">
        <div class="grid" id="collaborationsGrid">
          <!-- Collaborations will be populated by JavaScript -->
        </div>
      </div>

      <div id="analytics" class="dashboard-content">
        <div class="grid">
          <div class="card">
            <h3>Monthly Listeners</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">8,934</h2>
            <p style="color: var(--success);">+15% from last month</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 67%"></div>
            </div>
          </div>
          <div class="card">
            <h3>Top Geography</h3>
            <h2 style="color: var(--primary-orange); font-size: 2rem;">üá≥üá¨ Nigeria</h2>
            <p>34% of total streams</p>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">üá¨üá≠ Ghana (18%) ‚Ä¢ üá¨üáß UK (12%) ‚Ä¢ üá∫üá∏ USA (10%)</p>
          </div>
          <div class="card">
            <h3>Engagement Rate</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">12.3%</h2>
            <p style="color: var(--success);">Above average</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 82%"></div>
            </div>
          </div>
          <div class="card">
            <h3>Revenue This Month</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">$340</h2>
            <p style="color: var(--success);">+28% growth</p>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">Streams: $280 ‚Ä¢ Tips: $60</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- PROFILE PAGE -->
  <div id="profile" class="page">
    <section>
      <h2 class="section-title">üë§ Your Profile</h2>
      
      <div class="grid grid-2">
        <div class="card">
          <div class="artist-avatar" style="margin-bottom: 2rem;">
            <span id="profileAvatar">üéµ</span>
          </div>
          <h3 id="profileName">Music Creator</h3>
          <p id="profileLocation">Lagos, Nigeria</p>
          <div class="artist-stats">
            <div class="stat">
              <div class="stat-number">12</div>
              <div class="stat-label">Tracks</div>
            </div>
            <div class="stat">
              <div class="stat-number">1.2K</div>
              <div class="stat-label">Followers</div>
            </div>
            <div class="stat">
              <div class="stat-number">89</div>
              <div class="stat-label">Following</div>
            </div>
          </div>
          <button class="btn" onclick="editProfile()">‚úèÔ∏è Edit Profile</button>
        </div>
        
        <div class="card">
          <h3>‚öôÔ∏è Account Settings</h3>
          <div style="text-align: left;">
            <h4 style="color: var(--primary-orange); margin: 1rem 0;">Notifications</h4>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked> New collaboration requests
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked> Track performance updates
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox"> Weekly digest emails
            </label>
            
            <h4 style="color: var(--primary-orange); margin: 1rem 0;">Privacy</h4>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked> Public profile
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox"> Show online status
            </label>
          </div>
          <button class="btn btn-secondary" onclick="saveSettings()">üíæ Save Settings</button>
        </div>
      </div>

      <div style="margin-top: 3rem;">
        <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">üéµ Your Latest Tracks</h3>
        <div class="grid" id="userTracksGrid">
          <!-- User tracks will be populated by JavaScript -->
        </div>
      </div>
    </section>
  </div>

  <!-- AUTH MODAL -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <div class="close-btn" onclick="closeModal()">&times;</div>
      <h3 id="modalTitle">Login to AfroVibe</h3>
      <input type="email" id="emailInput" placeholder="Email Address" />
      <input type="password" id="passwordInput" placeholder="Password" />
      <input type="text" id="nameInput" placeholder="Full Name" style="display: none;" />
      <button class="btn" onclick="handleAuth()" id="authSubmit">Login</button>
      <div style="text-align: center; margin-top: 1rem;">
        <a href="#" onclick="toggleAuthMode()" style="color: var(--primary-orange);" id="toggleText">Don't have an account? Sign up</a>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="#">About</a>
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="#">Support</a>
        <a href="#">API</a>
        <a href="#">Careers</a>
      </div>
      <p>&copy; 2025 AfroVibe AI ‚Ä¢ Empowering the Global Afrobeat Community</p>
      <p style="margin-top: 1rem; font-size: 0.9rem;">Built with ‚ù§Ô∏è for music creators worldwide</p>
    </div>
  </footer>

  <script>
    // Application State
    let currentPage = 'home';
    let isLoggedIn = false;
    let currentUser = null;
    let isAuthModeLogin = true;
    let isPlaying = false;
    let currentTrack = null;
    let studioSession = {
      tracks: [],
      duration: 0,
      bpm: 120,
      key: 'A Minor'
    };
    let currentAudio = null; // For audio playback
    let magentaModels = {
      drumRNN: null,
      melodyRNN: null,
      musicVAE: null
    };

    // Persistent Session Storage
    function saveSession() {
      const sessionData = {
        isLoggedIn,
        currentUser,
        studioSession,
        currentPage,
        projects,
        collaborations,
        timestamp: Date.now()
      };
      try {
        localStorage.setItem('afrovibeSession', JSON.stringify(sessionData));
      } catch (e) {
        console.log('Failed to save session:', e);
      }
    }

    function loadSession() {
      try {
        const saved = localStorage.getItem('afrovibeSession');
        if (saved) {
          const sessionData = JSON.parse(saved);
          
          // Check if session is not too old (7 days)
          if (Date.now() - sessionData.timestamp < 7 * 24 * 60 * 60 * 1000) {
            isLoggedIn = sessionData.isLoggedIn || false;
            currentUser = sessionData.currentUser || null;
            studioSession = sessionData.studioSession || { tracks: [], duration: 0, bpm: 120, key: 'A Minor' };
            
            // Update projects if saved
            if (sessionData.projects) {
              projects.splice(0, projects.length, ...sessionData.projects);
            }
            
            // Update collaborations if saved
            if (sessionData.collaborations) {
              collaborations.splice(0, collaborations.length, ...sessionData.collaborations);
            }
            
            // Update UI for logged in user
            if (isLoggedIn && currentUser) {
              document.getElementById('authBtn').textContent = 'üö™ Logout';
              document.getElementById('authBtn').onclick = logout;
              document.getElementById('userMenu').classList.add('logged-in');
              document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
            }
            
            // Update studio session display
            updateTrackInfo();
            
            showNotification('üîÑ Session restored! Welcome back.', 'success');
            return true;
          }
        }
      } catch (e) {
        console.log('Failed to load session:', e);
      }
      return false;
    }

    // Auto-save session on changes
    function autoSave() {
      if (typeof window !== 'undefined') {
        setTimeout(saveSession, 100);
      }
    }

    // PWA Installation
    let deferredPrompt = null;

    function initializePWA() {
      // Create PWA manifest
      const manifest = {
        name: 'AfroVibe AI - Professional Afrobeat Music Platform',
        short_name: 'AfroVibe AI',
        description: 'Create authentic Afrobeat music with AI-powered tools',
        start_url: '/',
        display: 'standalone',
        background_color: '#0f0c29',
        theme_color: '#ff9f1c',
        orientation: 'portrait-primary',
        icons: [
          {
            src: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><rect width="192" height="192" fill="%23ff9f1c"/><text x="96" y="140" font-size="120" text-anchor="middle" fill="white">üéµ</text></svg>',
            sizes: '192x192',
            type: 'image/svg+xml'
          },
          {
            src: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect width="512" height="512" fill="%23ff9f1c"/><text x="256" y="370" font-size="320" text-anchor="middle" fill="white">üéµ</text></svg>',
            sizes: '512x512',
            type: 'image/svg+xml'
          }
        ],
        categories: ['music', 'productivity', 'education'],
        shortcuts: [
          {
            name: 'Open Studio',
            url: '/#studio',
            description: 'Start creating music'
          },
          {
            name: 'Community',
            url: '/#community', 
            description: 'Connect with artists'
          }
        ]
      };

      const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
      const manifestURL = URL.createObjectURL(manifestBlob);
      document.getElementById('manifestPlaceholder').href = manifestURL;

      // Register service worker
      if ('serviceWorker' in navigator) {
        const swCode = `
          const CACHE_NAME = 'afrovibe-ai-v1';
          const urlsToCache = [
            '/',
            '/manifest.json'
          ];

          self.addEventListener('install', event => {
            event.waitUntil(
              caches.open(CACHE_NAME)
                .then(cache => cache.addAll(urlsToCache))
            );
          });

          self.addEventListener('fetch', event => {
            event.respondWith(
              caches.match(event.request)
                .then(response => response || fetch(event.request))
            );
          });
        `;

        const swBlob = new Blob([swCode], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(swBlob);

        navigator.serviceWorker.register(swURL)
          .then(registration => {
            console.log('Service Worker registered:', registration);
            showNotification('üì± App ready for offline use!', 'success');
          })
          .catch(error => {
            console.log('Service Worker registration failed:', error);
          });
      }

      // Listen for beforeinstallprompt event
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        showInstallPrompt();
      });
    }

    function showInstallPrompt() {
      if (deferredPrompt) {
        const installBtn = document.createElement('button');
        installBtn.className = 'btn btn-success';
        installBtn.innerHTML = 'üì± Install App';
        installBtn.style.position = 'fixed';
        installBtn.style.top = '120px';
        installBtn.style.right = '20px';
        installBtn.style.zIndex = '1000';
        
        installBtn.onclick = async () => {
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          if (outcome === 'accepted') {
            showNotification('üéâ Thanks for installing AfroVibe AI!', 'success');
          }
          deferredPrompt = null;
          installBtn.remove();
        };
        
        document.body.appendChild(installBtn);
        
        setTimeout(() => {
          if (installBtn.parentNode) {
            installBtn.remove();
          }
        }, 10000); // Remove after 10 seconds
      }
    }

    // Mock Data
    const artists = [
      { 
        id: 1, name: 'Kemi Adebayo', location: 'Lagos, Nigeria', tracks: 23, followers: 12340, following: 89, 
        avatar: 'üë©üèø‚Äçüé§', status: 'online', genre: 'Traditional Afrobeat', verified: true,
        bio: 'Grammy-nominated producer specializing in authentic Afrobeat sounds with modern flair.'
      },
      { 
        id: 2, name: 'DJ Kwame', location: 'Accra, Ghana', tracks: 45, followers: 8920, following: 234, 
        avatar: 'üë®üèø‚Äçüé§', status: 'offline', genre: 'Afro-Fusion', verified: true,
        bio: 'International DJ bringing Afrobeat to global festivals and radio stations.'
      },
      { 
        id: 3, name: 'Amara Music', location: 'London, UK', tracks: 18, followers: 5670, following: 156, 
        avatar: 'üë©üèæ‚Äçüé§', status: 'online', genre: 'Afropop', verified: false,
        bio: 'UK-based artist blending Afrobeat with contemporary pop and R&B influences.'
      },
      { 
        id: 4, name: 'Fela Beats', location: 'NYC, USA', tracks: 67, followers: 18920, following: 345, 
        avatar: 'üë®üèæ‚Äçüé§', status: 'online', genre: 'Neo-Afrobeat', verified: true,
        bio: 'Innovative producer pushing the boundaries of Afrobeat with electronic elements.'
      },
      { 
        id: 5, name: 'Yemi Sounds', location: 'Toronto, Canada', tracks: 31, followers: 7450, following: 123, 
        avatar: 'üë©üèΩ‚Äçüé§', status: 'offline', genre: 'Afro-Jazz', verified: false,
        bio: 'Jazz-trained musician creating sophisticated Afrobeat compositions.'
      },
      { 
        id: 6, name: 'Afro Thunder', location: 'Paris, France', tracks: 28, followers: 6560, following: 178, 
        avatar: 'üë®üèΩ‚Äçüé§', status: 'online', genre: 'Afrobeat', verified: true,
        bio: 'French-based collective promoting Afrobeat culture across Europe.'
      }
    ];

    const courses = [
      {
        id: 1, title: 'Afrobeat Fundamentals', level: 'beginner', duration: '8 weeks', 
        price: 'Free', instructor: 'Prof. Adebayo', rating: 4.9, students: 12450,
        description: 'Master the essential rhythms, scales, and cultural context of traditional Afrobeat music.',
        modules: ['History & Origins', 'Basic Rhythms', 'Instrumentation', 'Cultural Context']
      },
      {
        id: 2, title: 'Advanced Production Masterclass', level: 'advanced', duration: '12 weeks', 
        price: '$149', instructor: 'DJ Kwame', rating: 4.8, students: 3420,
        description: 'Professional mixing, mastering, and advanced production techniques for studio-quality tracks.',
        modules: ['Advanced Mixing', 'Mastering Secrets', 'Studio Setup', 'Professional Workflow']
      },
      {
        id: 3, title: 'AI Tools Workshop', level: 'intermediate', duration: '6 weeks', 
        price: '$79', instructor: 'Tech Team', rating: 4.7, students: 5670,
        description: 'Harness the power of AI to enhance your creative process and discover new possibilities.',
        modules: ['AI Beat Generation', 'Smart Arrangement', 'Auto-Mixing', 'Creative AI']
      },
      {
        id: 4, title: 'Vocal Techniques & Performance', level: 'intermediate', duration: '10 weeks', 
        price: '$99', instructor: 'Amara Music', rating: 4.8, students: 4230,
        description: 'Develop your vocal skills with traditional and contemporary Afrobeat singing techniques.',
        modules: ['Vocal Training', 'Performance Skills', 'Studio Recording', 'Stage Presence']
      }
    ];

    const projects = [
      { 
        id: 1, title: 'Lagos Nights', genre: 'Afrobeat', duration: '3:45', status: 'complete', 
        lastModified: '2 days ago', collaborators: [], plays: 2450, likes: 189
      },
      { 
        id: 2, title: 'Sunset Vibes', genre: 'Afro-Fusion', duration: '4:12', status: 'progress', 
        lastModified: '5 hours ago', collaborators: ['DJ Kwame'], plays: 0, likes: 0
      },
      { 
        id: 3, title: 'Dancing Queen', genre: 'Afropop', duration: '3:28', status: 'complete', 
        lastModified: '1 week ago', collaborators: [], plays: 8920, likes: 445
      },
      { 
        id: 4, title: 'Rhythm of Life', genre: 'Traditional', duration: '5:01', status: 'draft', 
        lastModified: '3 days ago', collaborators: ['Amara Music'], plays: 0, likes: 0
      },
      { 
        id: 5, title: 'Future Dreams', genre: 'Neo-Afrobeat', duration: '3:55', status: 'progress', 
        lastModified: '1 day ago', collaborators: [], plays: 0, likes: 0
      }
    ];

    const collaborations = [
      { 
        id: 1, title: 'African Unity', collaborator: 'DJ Kwame', status: 'active', 
        progress: 75, deadline: '2024-02-15', lastActivity: '2 hours ago'
      },
      { 
        id: 2, title: 'Global Sounds', collaborator: 'Amara Music', status: 'pending', 
        progress: 25, deadline: '2024-03-01', lastActivity: '1 day ago'
      },
      { 
        id: 3, title: 'Future Beats', collaborator: 'Fela Beats', status: 'complete', 
        progress: 100, deadline: '2024-01-20', lastActivity: '1 week ago'
      }
    ];

    // Utility Functions
    function showLoading() {
      document.getElementById('loadingOverlay').classList.add('active');
    }

    function hideLoading() {
      document.getElementById('loadingOverlay').classList.remove('active');
    }

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'notificationSlide 0.3s ease reverse';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    // Navigation Functions
    function showPage(pageId) {
      showLoading();
      
      setTimeout(() => {
        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });
        
        // Show selected page
        document.getElementById(pageId).classList.add('active');
        
        // Update navigation
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
        });
        
        // Find and activate the correct nav link
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
          if (link.onclick && link.onclick.toString().includes(`showPage('${pageId}')`)) {
            link.classList.add('active');
          }
        });
        
        currentPage = pageId;
        
        // Load page-specific content
        switch(pageId) {
          case 'community':
            loadArtists();
            break;
          case 'learn':
            loadCourses();
            break;
          case 'dashboard':
            loadDashboard();
            break;
          case 'studio':
            initializeStudio();
            break;
          case 'profile':
            loadProfile();
            break;
        }
        
        hideLoading();
      }, 500);
    }

    function toggleMobileMenu() {
      const navMenu = document.getElementById('navMenu');
      navMenu.classList.toggle('mobile-open');
    }

    // Studio Functions
    function initializeStudio() {
      generateWaveformBars();
      updateStudioStatus('Ready to Create');
    }

    function generateWaveformBars() {
      const waveformBars = document.getElementById('waveformBars');
      waveformBars.innerHTML = '';
      
      for (let i = 0; i < 50; i++) {
        const bar = document.createElement('div');
        bar.className = 'waveform-bar';
        bar.style.height = Math.random() * 60 + 10 + 'px';
        waveformBars.appendChild(bar);
      }
    }

    function updateStudioStatus(status) {
      document.getElementById('studioStatus').textContent = status;
    }

    function studioAction(action) {
      const outputLogs = document.getElementById('outputLogs');
      const waveformText = document.getElementById('waveformText');
      const waveAnimation = document.getElementById('waveAnimation');
      const trackDuration = document.getElementById('trackDuration');
      const trackBPM = document.getElementById('trackBPM');
      const trackKey = document.getElementById('trackKey');
      
      const timestamp = new Date().toLocaleTimeString();
      
      // Simulate loading
      updateStudioStatus('Processing...');
      
      switch(action) {
        case 'generateBeat':
          addLog('ü•Å Analyzing traditional Afrobeat patterns...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Polyrhythmic beat generated! Complex 4/4 with traditional elements', 'var(--success)');
            waveformText.textContent = 'ü•Å Afrobeat Foundation - Polyrhythmic Pattern';
            studioSession.tracks.push('Drum Track');
            studioSession.duration += 30;
            updateTrackInfo();
            updateStudioStatus('Beat Generated');
            generateWaveformBars();
          }, 2000);
          break;
          
        case 'addPercussion':
          addLog('ü™ò Adding traditional percussion instruments...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Talking drums, shekere, and clapsticks added', 'var(--success)');
            waveformText.textContent = 'ü™ò Rich Percussion Layer - Traditional Elements';
            studioSession.tracks.push('Percussion');
            updateTrackInfo();
            updateStudioStatus('Percussion Added');
          }, 1800);
          break;
          
        case 'addMelody':
          addLog('üéπ Creating melodic elements with pentatonic scales...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Keyboard melody with traditional scales and modern harmony', 'var(--success)');
            waveformText.textContent = 'üéπ Melodic Layer - Pentatonic Harmony';
            studioSession.tracks.push('Melody');
            updateTrackInfo();
            updateStudioStatus('Melody Composed');
          }, 2200);
          break;
          
        case 'addBass':
          addLog('üé∏ Programming bass line with traditional patterns...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Deep bass line synchronized with kick pattern', 'var(--success)');
            waveformText.textContent = 'üé∏ Bass Foundation - Driving Rhythm';
            studioSession.tracks.push('Bass');
            updateTrackInfo();
            updateStudioStatus('Bass Added');
          }, 1600);
          break;
          
        case 'recordVocal':
          if (!isLoggedIn) {
            showNotification('Please login to record vocals', 'warning');
            openModal();
            return;
          }
          addLog('üé§ Recording vocal track... Stand by', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Vocal recording complete - 45 seconds of pure emotion', 'var(--success)');
            waveformText.textContent = 'üé§ Vocal Performance - Captured with feeling';
            studioSession.tracks.push('Vocals');
            updateTrackInfo();
            updateStudioStatus('Vocals Recorded');
          }, 3000);
          break;
          
        case 'addEffects':
          addLog('‚ö° Applying reverb, delay, and compression...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Professional effects applied - Studio quality achieved', 'var(--success)');
            waveformText.textContent = '‚ö° Effects Applied - Professional Polish';
            updateStudioStatus('Effects Added');
          }, 1400);
          break;
          
        case 'aiSuggest':
          addLog('ü§ñ AI analyzing your track for suggestions...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('üí° AI suggests: Add brass section in chorus, extend bridge by 8 bars', 'var(--warning)');
            addLog('üí° AI suggests: Consider adding call-and-response vocals', 'var(--warning)');
            updateStudioStatus('AI Analysis Complete');
          }, 2500);
          break;
          
        case 'autoMix':
          addLog('üéõÔ∏è AI auto-mixing with professional settings...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Track mixed and mastered - Radio ready quality', 'var(--success)');
            waveformText.textContent = 'üéõÔ∏è Final Mix - Professional Master';
            updateStudioStatus('Mix Complete');
          }, 3500);
          break;
          
        case 'play':
          if (!isPlaying) {
            addLog('‚ñ∂Ô∏è Playing current composition...', 'var(--success)');
            waveAnimation.style.display = 'block';
            waveformText.textContent = '‚ñ∂Ô∏è Now Playing - Your Afrobeat Creation';
            isPlaying = true;
            updateStudioStatus('Playing');
            
            // Update play button
            document.getElementById('playBtn').innerHTML = '‚è∏Ô∏è Playing';
          }
          break;
          
        case 'pause':
          if (isPlaying) {
            addLog('‚è∏Ô∏è Playback paused', 'var(--warning)');
            waveAnimation.style.display = 'none';
            waveformText.textContent = '‚è∏Ô∏è Paused - Click play to continue';
            isPlaying = false;
            updateStudioStatus('Paused');
            
            // Update play button
            document.getElementById('playBtn').innerHTML = '‚ñ∂Ô∏è Play';
          }
          break;
          
        case 'export':
          if (studioSession.tracks.length === 0) {
            showNotification('No tracks to export! Create some music first.', 'warning');
            return;
          }
          addLog('üìÅ Exporting in multiple formats (WAV, MP3, FLAC)...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('‚úÖ Export complete! Files saved to Downloads folder', 'var(--success)');
            showNotification('Track exported successfully!', 'success');
            updateStudioStatus('Export Complete');
          }, 2000);
          break;
          
        case 'share':
          if (studioSession.tracks.length === 0) {
            showNotification('No tracks to share! Create some music first.', 'warning');
            return;
          }
          if (!isLoggedIn) {
            showNotification('Please login to share your tracks', 'warning');
            openModal();
            return;
          }
          addLog('üì§ Uploading to AfroVibe community...', 'var(--primary-orange)');
          setTimeout(() => {
            const trackId = Math.random().toString(36).substring(7);
            addLog(`‚úÖ Track shared! Link: afrovibe.ai/track/${trackId}`, 'var(--success)');
            showNotification('Track shared with the community!', 'success');
            updateStudioStatus('Shared Successfully');
          }, 1500);
          break;
      }
    }

    function updateTrackInfo() {
      const duration = Math.floor(studioSession.duration / 60) + ':' + 
                      (studioSession.duration % 60).toString().padStart(2, '0');
      document.getElementById('trackDuration').textContent = duration;
      document.getElementById('trackBPM').textContent = studioSession.bpm;
      document.getElementById('trackKey').textContent = studioSession.key;
    }

    function addLog(message, color = 'var(--text-light)') {
      const outputLogs = document.getElementById('outputLogs');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.color = color;
      logEntry.innerHTML = `[${timestamp}] ${message}`;
      outputLogs.appendChild(logEntry);
      outputLogs.scrollTop = outputLogs.scrollHeight;
    }

    function saveProject() {
      if (!isLoggedIn) {
        showNotification('Please login to save projects', 'warning');
        openModal();
        return;
      }
      
      if (studioSession.tracks.length === 0) {
        showNotification('No tracks to save! Create some music first.', 'warning');
        return;
      }
      
      const projectName = prompt('Enter project name:') || 'Untitled Project';
      addLog(`üíæ Saving project "${projectName}"...`, 'var(--primary-orange)');
      
      setTimeout(() => {
        projects.unshift({
          id: projects.length + 1,
          title: projectName,
          genre: 'Afrobeat',
          duration: Math.floor(studioSession.duration / 60) + ':' + 
                   (studioSession.duration % 60).toString().padStart(2, '0'),
          status: 'progress',
          lastModified: 'Just now',
          collaborators: [],
          plays: 0,
          likes: 0
        });
        
        addLog('‚úÖ Project saved successfully!', 'var(--success)');
        showNotification(`Project "${projectName}" saved!`, 'success');
      }, 1000);
    }

    function newProject() {
      if (studioSession.tracks.length > 0) {
        if (!confirm('Start a new project? Unsaved changes will be lost.')) {
          return;
        }
      }
      
      studioSession = { tracks: [], duration: 0, bpm: 120, key: 'A Minor' };
      document.getElementById('outputLogs').innerHTML = `
        <div style="color: var(--primary-orange);">[${new Date().toLocaleTimeString()}] New project started</div>
        <div style="color: var(--success);">[${new Date().toLocaleTimeString()}] Studio ready for creation</div>
      `;
      document.getElementById('waveformText').textContent = 'üéµ Your masterpiece will appear here';
      updateTrackInfo();
      updateStudioStatus('New Project');
      generateWaveformBars();
    }

    function loadProject() {
      if (!isLoggedIn) {
        showNotification('Please login to load projects', 'warning');
        openModal();
        return;
      }
      
      showPage('dashboard');
      showDashboardTab('projects');
    }

    // Community Functions
    function loadArtists() {
      const artistGrid = document.getElementById('artistGrid');
      artistGrid.innerHTML = '';
      
      artists.forEach(artist => {
        const artistCard = document.createElement('div');
        artistCard.className = 'artist-card';
        artistCard.innerHTML = `
          <div class="artist-avatar">
            ${artist.avatar}
            <div class="artist-status" style="background: ${artist.status === 'online' ? 'var(--success)' : '#666'};"></div>
          </div>
          <h3>${artist.name} ${artist.verified ? '‚úì' : ''}</h3>
          <p style="color: var(--primary-gold); margin: 0.5rem 0;">${artist.location}</p>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 1rem 0;">${artist.genre}</p>
          <div class="artist-stats">
            <div class="stat">
              <div class="stat-number">${artist.tracks}</div>
              <div class="stat-label">Tracks</div>
            </div>
            <div class="stat">
              <div class="stat-number">${formatNumber(artist.followers)}</div>
              <div class="stat-label">Followers</div>
            </div>
            <div class="stat">
              <div class="stat-number">${artist.following}</div>
              <div class="stat-label">Following</div>
            </div>
          </div>
          <p style="color: var(--text-secondary); font-size: 0.8rem; margin: 1rem 0; line-height: 1.4;">${artist.bio}</p>
          <div style="margin-top: 1rem;">
            <button class="btn btn-small" onclick="connectArtist('${artist.name}')">ü§ù Connect</button>
            <button class="btn btn-secondary btn-small" onclick="viewProfile(${artist.id})">üëÅÔ∏è View</button>
          </div>
        `;
        artistGrid.appendChild(artistCard);
      });
    }

    function searchArtists(query) {
      // Simple search implementation
      const artistCards = document.querySelectorAll('.artist-card');
      artistCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterArtists(region) {
      const artistCards = document.querySelectorAll('.artist-card');
      artistCards.forEach((card, index) => {
        const artist = artists[index];
        if (region === 'all') {
          card.style.display = 'block';
        } else {
          const show = (region === 'africa' && (artist.location.includes('Nigeria') || artist.location.includes('Ghana'))) ||
                       (region === 'europe' && (artist.location.includes('UK') || artist.location.includes('France'))) ||
                       (region === 'americas' && (artist.location.includes('USA') || artist.location.includes('Canada')));
          card.style.display = show ? 'block' : 'none';
        }
      });
    }

    function joinCommunity() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification('üéâ Welcome to the AfroVibe community!', 'success');
    }

    function connectArtist(artistName) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification(`ü§ù Connection request sent to ${artistName}!`, 'success');
    }

    function viewProfile(artistId) {
      const artist = artists.find(a => a.id === artistId);
      alert(`üëÅÔ∏è Viewing ${artist.name}'s profile\n\n${artist.bio}\n\nüìç ${artist.location}\nüéµ ${artist.tracks} tracks\nüë• ${formatNumber(artist.followers)} followers`);
    }

    // Learn Functions
    function loadCourses() {
      const coursesGrid = document.getElementById('coursesGrid');
      coursesGrid.innerHTML = '';
      
      courses.forEach(course => {
        const courseCard = document.createElement('div');
        courseCard.className = 'card';
        courseCard.innerHTML = `
          <h3>${course.title}</h3>
          <p style="color: var(--primary-orange);">Level: ${course.level.charAt(0).toUpperCase() + course.level.slice(1)}</p>
          <p style="color: var(--text-secondary); margin: 1rem 0;">${course.description}</p>
          <div style="margin: 1rem 0;">
            <p>üë®‚Äçüè´ <strong>${course.instructor}</strong></p>
            <p>‚è±Ô∏è ${course.duration} ‚Ä¢ ‚≠ê ${course.rating} ‚Ä¢ üë• ${formatNumber(course.students)} students</p>
          </div>
          <h4 style="color: var(--primary-gold); margin: 1rem 0;">${course.price}</h4>
          <div style="text-align: left; margin: 1rem 0;">
            <h5 style="color: var(--primary-orange);">Modules:</h5>
            <ul style="margin-left: 1rem;">
              ${course.modules.map(module => `<li>${module}</li>`).join('')}
            </ul>
          </div>
          <button class="btn" onclick="enrollCourse('${course.title}', '${course.price}')">${course.price === 'Free' ? 'üìö Enroll Free' : 'üí≥ Enroll Now'}</button>
        `;
        coursesGrid.appendChild(courseCard);
      });
    }

    function searchCourses(query) {
      const courseCards = document.querySelectorAll('#coursesGrid .card');
      courseCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterCourses(level) {
      const courseCards = document.querySelectorAll('#coursesGrid .card');
      courseCards.forEach((card, index) => {
        const course = courses[index];
        if (level === 'all' || course.level === level) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function enrollCourse(courseTitle, price) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      
      if (price !== 'Free') {
        alert(`üí≥ Enrollment in "${courseTitle}" for ${price}\n\nThis would normally redirect to payment processing.`);
      } else {
        showNotification(`üéì Enrolled in "${courseTitle}"! Check your dashboard.`, 'success');
      }
    }

    function startLearningPath(path) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      
      const pathNames = {
        'producer': 'Producer Path',
        'artist': 'Artist Path'
      };
      
      showNotification(`üéØ Started ${pathNames[path]}! Your journey begins now.`, 'success');
    }

    // Dashboard Functions
    function loadDashboard() {
      loadProjects();
      loadCollaborations();
      loadUserTracks();
    }

    function loadProjects() {
      const projectsGrid = document.getElementById('projectsGrid');
      projectsGrid.innerHTML = '';
      
      projects.forEach((project, index) => {
        const projectCard = document.createElement('div');
        projectCard.className = 'project-card';
        
        const statusClass = project.status === 'complete' ? 'status-complete' : 
                           project.status === 'progress' ? 'status-progress' : 'status-draft';
        
        projectCard.innerHTML = `
          <div class="project-header">
            <h3 class="project-title">${project.title}</h3>
            <span class="project-status ${statusClass}">${project.status}</span>
          </div>
          <div class="project-meta">
            <span>üéµ ${project.genre}</span>
            <span>‚è±Ô∏è ${project.duration}</span>
          </div>
          <p style="color: var(--text-secondary); margin: 1rem 0;">
            Modified ${project.lastModified}
            ${project.collaborators.length > 0 ? `‚Ä¢ With ${project.collaborators.join(', ')}` : ''}
          </p>
          ${project.status === 'complete' ? `
            <div style="margin: 1rem 0;">
              <p style="color: var(--success);">‚ñ∂Ô∏è ${formatNumber(project.plays)} plays ‚Ä¢ ‚ù§Ô∏è ${project.likes} likes</p>
            </div>
          ` : ''}
          <div class="project-actions">
            <button class="btn btn-small" onclick="editProject(${index})">‚úèÔ∏è Edit</button>
            <button class="btn btn-secondary btn-small" onclick="shareProject(${index})">üì§ Share</button>
            ${project.status === 'complete' ? '<button class="btn btn-dark btn-small" onclick="viewStats(' + index + ')">üìä Stats</button>' : ''}
          </div>
        `;
        projectsGrid.appendChild(projectCard);
      });
    }

    function loadCollaborations() {
      const collaborationsGrid = document.getElementById('collaborationsGrid');
      collaborationsGrid.innerHTML = '';
      
      collaborations.forEach((collab, index) => {
        const collabCard = document.createElement('div');
        collabCard.className = 'card';
        
        const statusColor = collab.status === 'complete' ? 'var(--success)' : 
                           collab.status === 'active' ? 'var(--primary-orange)' : 'var(--warning)';
        
        collabCard.innerHTML = `
          <h3>${collab.title}</h3>
          <p style="color: var(--primary-gold);">with ${collab.collaborator}</p>
          <p style="color: ${statusColor}; margin: 1rem 0;">Status: ${collab.status}</p>
          <div class="progress-container">
            <div class="progress-bar" style="width: ${collab.progress}%;"></div>
          </div>
          <p>Progress: ${collab.progress}%</p>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 1rem 0;">
            Due: ${collab.deadline} ‚Ä¢ Last activity: ${collab.lastActivity}
          </p>
          <button class="btn btn-small" onclick="openCollaboration(${index})">üéµ Open</button>
        `;
        collaborationsGrid.appendChild(collabCard);
      });
    }

    function showDashboardTab(tabName) {
      // Update tab buttons
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Update content
      document.querySelectorAll('.dashboard-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(tabName).classList.add('active');
    }

    function searchProjects(query) {
      const projectCards = document.querySelectorAll('.project-card');
      projectCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterProjects(status) {
      const projectCards = document.querySelectorAll('.project-card');
      projectCards.forEach((card, index) => {
        const project = projects[index];
        if (status === 'all' || project.status === status) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function editProject(index) {
      const project = projects[index];
      showNotification(`‚úèÔ∏è Opening "${project.title}" in studio...`, 'success');
      setTimeout(() => showPage('studio'), 1000);
    }

    function shareProject(index) {
      const project = projects[index];
      showNotification(`üì§ "${project.title}" shared successfully!`, 'success');
    }

    function viewStats(index) {
      const project = projects[index];
      alert(`üìä Stats for "${project.title}"\n\n‚ñ∂Ô∏è ${formatNumber(project.plays)} total plays\n‚ù§Ô∏è ${project.likes} likes\nüìà Growing 12% this week\nüåç Top countries: Nigeria, Ghana, UK`);
    }

    function openCollaboration(index) {
      const collab = collaborations[index];
      alert(`üéµ Opening collaboration: "${collab.title}"\n\nWorking with ${collab.collaborator}\nProgress: ${collab.progress}%\nDue: ${collab.deadline}`);
    }

    // Profile Functions
    function loadProfile() {
      if (isLoggedIn && currentUser) {
        document.getElementById('profileName').textContent = currentUser.name;
        document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
      }
      loadUserTracks();
    }

    function loadUserTracks() {
      const userTracksGrid = document.getElementById('userTracksGrid');
      if (!userTracksGrid) return;
      
      userTracksGrid.innerHTML = '';
      
      // Show user's completed projects as tracks
      const userTracks = projects.filter(p => p.status === 'complete');
      
      userTracks.forEach(track => {
        const trackCard = document.createElement('div');
        trackCard.className = 'card';
        trackCard.innerHTML = `
          <h3>${track.title}</h3>
          <p style="color: var(--primary-gold);">${track.genre} ‚Ä¢ ${track.duration}</p>
          <p style="color: var(--text-secondary);">Released ${track.lastModified}</p>
          <div style="margin: 1rem 0;">
            <p style="color: var(--success);">‚ñ∂Ô∏è ${formatNumber(track.plays)} plays ‚Ä¢ ‚ù§Ô∏è ${track.likes} likes</p>
          </div>
          <button class="btn btn-small" onclick="playTrack('${track.title}')">‚ñ∂Ô∏è Play</button>
        `;
        userTracksGrid.appendChild(trackCard);
      });
    }

    function editProfile() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      alert('‚úèÔ∏è Profile editing would open a detailed form here.');
    }

    function saveSettings() {
      showNotification('‚öôÔ∏è Settings saved successfully!', 'success');
    }

    function playTrack(title) {
      showNotification(`‚ñ∂Ô∏è Now playing: "${title}"`, 'success');
    }

    // Auth Functions
    function openModal() {
      document.getElementById('authModal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('authModal').classList.remove('active');
    }

    function toggleAuthMode() {
      const modalTitle = document.getElementById('modalTitle');
      const authSubmit = document.getElementById('authSubmit');
      const toggleText = document.getElementById('toggleText');
      const nameInput = document.getElementById('nameInput');
      
      isAuthModeLogin = !isAuthModeLogin;
      
      if (isAuthModeLogin) {
        modalTitle.textContent = 'Login to AfroVibe';
        authSubmit.textContent = 'Login';
        toggleText.textContent = "Don't have an account? Sign up";
        nameInput.style.display = 'none';
      } else {
        modalTitle.textContent = 'Join AfroVibe';
        authSubmit.textContent = 'Sign Up';
        toggleText.textContent = 'Already have an account? Login';
        nameInput.style.display = 'block';
      }
    }

    function handleAuth() {
      const email = document.getElementById('emailInput').value;
      const password = document.getElementById('passwordInput').value;
      const name = document.getElementById('nameInput').value;
      
      if (!email || !password || (!isAuthModeLogin && !name)) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      // Simulate authentication
      showLoading();
      
      setTimeout(() => {
        isLoggedIn = true;
        currentUser = { 
          email: email, 
          name: isAuthModeLogin ? email.split('@')[0] : name 
        };
        
        // Update UI
        document.getElementById('authBtn').textContent = 'üö™ Logout';
        document.getElementById('authBtn').onclick = logout;
        document.getElementById('userMenu').classList.add('logged-in');
        document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
        
        closeModal();
        hideLoading();
        
        const action = isAuthModeLogin ? 'logged in' : 'signed up';
        showNotification(`üéâ Successfully ${action}! Welcome ${currentUser.name}!`, 'success');
        
        // Clear form
        document.getElementById('emailInput').value = '';
        document.getElementById('passwordInput').value = '';
        document.getElementById('nameInput').value = '';
        
        // Load user-specific content
        if (currentPage === 'profile') {
          loadProfile();
        }
      }, 1500);
    }

    function logout() {
      isLoggedIn = false;
      currentUser = null;
      document.getElementById('authBtn').textContent = 'üîê Login';
      document.getElementById('authBtn').onclick = openModal;
      document.getElementById('userMenu').classList.remove('logged-in');
      showNotification('üëã Logged out successfully!', 'success');
    }

    function toggleUserMenu() {
      // Placeholder for user menu dropdown
      alert('User menu would show options:\n‚Ä¢ Profile\n‚Ä¢ Settings\n‚Ä¢ Help\n‚Ä¢ Logout');
    }

    // Utility Functions
    function handleShare() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification('üì§ Sharing features available in studio!', 'success');
      setTimeout(() => showPage('studio'), 1000);
    }

    // Enhanced Audio and Magenta.js Integration
    async function initializeMagenta() {
      try {
        addLog('üß† Loading Magenta.js AI models...', 'var(--primary-orange)');
        
        // Initialize Drum RNN for beat generation
        if (typeof mm !== 'undefined' && mm.MusicRNN) {
          magentaModels.drumRNN = new mm.MusicRNN('https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/drum_kit_rnn');
          await magentaModels.drumRNN.initialize();
          addLog('‚úÖ Drum RNN model loaded successfully', 'var(--success)');
        }
        
        // Initialize Melody RNN for melody generation
        if (typeof mm !== 'undefined' && mm.MusicRNN) {
          magentaModels.melodyRNN = new mm.MusicRNN('https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/melody_rnn');
          await magentaModels.melodyRNN.initialize();
          addLog('‚úÖ Melody RNN model loaded successfully', 'var(--success)');
        }
        
        addLog('üéµ AI music generation models ready!', 'var(--success)');
        showNotification('ü§ñ AI models loaded! Ready for advanced music generation.', 'success');
      } catch (error) {
        console.log('Magenta models not available, using simulation mode');
        addLog('‚ö†Ô∏è AI models loading in simulation mode', 'var(--warning)');
      }
    }

    // Enhanced Beat Generation with Magenta.js
    async function generateAIBeat() {
      addLog('üß† Generating Afrobeat rhythm with AI...', 'var(--primary-orange)');
      updateStudioStatus('AI Generating...');
      
      try {
        if (magentaModels.drumRNN) {
          // Use real Magenta.js for beat generation
          const seed = {
            notes: [
              { pitch: 36, startTime: 0.0, endTime: 0.5, velocity: 120 }, // Kick
              { pitch: 38, startTime: 1.0, endTime: 1.5, velocity: 110 }, // Snare
            ],
            totalTime: 2.0,
            quantizationInfo: { stepsPerQuarter: 4 }
          };
          
          const quantized = mm.sequences.quantizeNoteSequence(seed, 4);
          const result = await magentaModels.drumRNN.continueSequence(quantized, 32, 1.0);
          
          // Convert to playable audio
          if (typeof mm.Player !== 'undefined') {
            const player = new mm.Player();
            currentAudio = player;
            await player.start(result);
          }
          
          // Download MIDI option
          downloadMIDI(result);
          
          addLog('‚úÖ Real AI beat generated with Magenta.js!', 'var(--success)');
          
        } else {
          // Fallback simulation
          simulateAudioGeneration();
        }
      } catch (error) {
        console.log('AI generation error, using simulation:', error);
        simulateAudioGeneration();
      }
      
      function simulateAudioGeneration() {
        // Create simulated audio file
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const duration = 4; // 4 seconds
        const sampleRate = audioContext.sampleRate;
        const frameCount = sampleRate * duration;
        const buffer = audioContext.createBuffer(2, frameCount, sampleRate);
        
        // Generate Afrobeat-style rhythm pattern
        for (let channel = 0; channel < 2; channel++) {
          const channelData = buffer.getChannelData(channel);
          for (let i = 0; i < frameCount; i++) {
            const time = i / sampleRate;
            // Create polyrhythmic pattern
            const kick = Math.sin(2 * Math.PI * 120 * time) * (Math.floor(time * 2) % 2 === 0 ? 0.8 : 0);
            const snare = Math.sin(2 * Math.PI * 200 * time) * (Math.floor(time * 4) % 4 === 2 ? 0.6 : 0);
            const hihat = Math.random() * 0.1 * (Math.floor(time * 8) % 2);
            channelData[i] = (kick + snare + hihat) * Math.exp(-time * 0.5);
          }
        }
        
        // Create audio source and play
        const source = audioContext.createBufferSource();
        source.buffer = buffer;
        source.connect(audioContext.destination);
        source.start();
        currentAudio = source;
        
        // Create downloadable file
        exportAudioBuffer(buffer, 'afrovibe-beat.wav');
        
        addLog('‚úÖ Simulated Afrobeat rhythm generated!', 'var(--success)');
      }
      
      // Update UI
      document.getElementById('waveformText').textContent = 'ü•Å AI-Generated Afrobeat - Real Polyrhythm';
      studioSession.tracks.push('AI Beat');
      studioSession.duration += 30;
      updateTrackInfo();
      updateStudioStatus('AI Beat Generated');
      generateWaveformBars();
      animateWaveformBars();
      autoSave();
    }

    // Enhanced Melody Generation
    async function generateAIMelody() {
      addLog('üéπ Creating AI melody with pentatonic scales...', 'var(--primary-orange)');
      updateStudioStatus('AI Composing...');
      
      try {
        if (magentaModels.melodyRNN) {
          const seed = {
            notes: [
              { pitch: 60, startTime: 0, endTime: 0.5, velocity: 80 }, // C
              { pitch: 62, startTime: 0.5, endTime: 1.0, velocity: 75 }, // D
            ],
            totalTime: 1.0,
            quantizationInfo: { stepsPerQuarter: 4 }
          };
          
          const quantized = mm.sequences.quantizeNoteSequence(seed, 4);
          const result = await magentaModels.melodyRNN.continueSequence(quantized, 32, 0.9);
          
          if (typeof mm.Player !== 'undefined') {
            const player = new mm.Player();
            currentAudio = player;
            await player.start(result);
          }
          
          downloadMIDI(result);
          addLog('‚úÖ Real AI melody generated with Magenta.js!', 'var(--success)');
          
        } else {
          // Fallback simulation
          simulateMelodyGeneration();
        }
      } catch (error) {
        console.log('AI melody error, using simulation:', error);
        simulateMelodyGeneration();
      }
      
      function simulateMelodyGeneration() {
        // Generate pentatonic melody
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const duration = 8;
        const sampleRate = audioContext.sampleRate;
        const frameCount = sampleRate * duration;
        const buffer = audioContext.createBuffer(2, frameCount, sampleRate);
        
        // Pentatonic scale frequencies (C pentatonic)
        const scale = [261.63, 293.66, 329.63, 392.00, 440.00, 523.25]; // C D E G A C
        
        for (let channel = 0; channel < 2; channel++) {
          const channelData = buffer.getChannelData(channel);
          for (let i = 0; i < frameCount; i++) {
            const time = i / sampleRate;
            const noteIndex = Math.floor(time * 2) % scale.length;
            const freq = scale[noteIndex];
            const envelope = Math.exp(-((time % 0.5) * 4));
            channelData[i] = Math.sin(2 * Math.PI * freq * time) * envelope * 0.3;
          }
        }
        
        const source = audioContext.createBufferSource();
        source.buffer = buffer;
        source.connect(audioContext.destination);
        source.start();
        currentAudio = source;
        
        exportAudioBuffer(buffer, 'afrovibe-melody.wav');
        addLog('‚úÖ Pentatonic melody generated!', 'var(--success)');
      }
      
      document.getElementById('waveformText').textContent = 'üéπ AI Melody - Pentatonic Harmony';
      studioSession.tracks.push('AI Melody');
      updateTrackInfo();
      updateStudioStatus('AI Melody Generated');
      animateWaveformBars();
      autoSave();
    }

    // MIDI Download Function
    function downloadMIDI(sequence) {
      try {
        if (typeof mm !== 'undefined' && mm.sequenceProtoToMidi) {
          const midi = mm.sequenceProtoToMidi(sequence);
          const blob = new Blob([midi], { type: 'audio/midi' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `afrovibe-${Date.now()}.mid`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
          showNotification('üéµ MIDI file downloaded!', 'success');
        }
      } catch (error) {
        console.log('MIDI download error:', error);
      }
    }

    // Audio Buffer Export
    function exportAudioBuffer(buffer, filename) {
      try {
        const length = buffer.length;
        const channels = buffer.numberOfChannels;
        const sampleRate = buffer.sampleRate;
        
        // Create WAV file
        const arrayBuffer = new ArrayBuffer(44 + length * channels * 2);
        const view = new DataView(arrayBuffer);
        
        // WAV header
        const writeString = (offset, string) => {
          for (let i = 0; i < string.length; i++) {
            view.setUint8(offset + i, string.charCodeAt(i));
          }
        };
        
        writeString(0, 'RIFF');
        view.setUint32(4, 36 + length * channels * 2, true);
        writeString(8, 'WAVE');
        writeString(12, 'fmt ');
        view.setUint32(16, 16, true);
        view.setUint16(20, 1, true);
        view.setUint16(22, channels, true);
        view.setUint32(24, sampleRate, true);
        view.setUint32(28, sampleRate * channels * 2, true);
        view.setUint16(32, channels * 2, true);
        view.setUint16(34, 16, true);
        writeString(36, 'data');
        view.setUint32(40, length * channels * 2, true);
        
        // Audio data
        let offset = 44;
        for (let i = 0; i < length; i++) {
          for (let channel = 0; channel < channels; channel++) {
            const sample = Math.max(-1, Math.min(1, buffer.getChannelData(channel)[i]));
            view.setInt16(offset, sample * 0x7FFF, true);
            offset += 2;
          }
        }
        
        // Download
        const blob = new Blob([arrayBuffer], { type: 'audio/wav' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showNotification(`üìÅ ${filename} downloaded!`, 'success');
      } catch (error) {
        console.log('Audio export error:', error);
        showNotification('Export simulation complete!', 'success');
      }
    }

    // Enhanced Waveform Animation
    function animateWaveformBars() {
      const bars = document.querySelectorAll('.waveform-bar');
      bars.forEach((bar, index) => {
        const height = Math.random() * 60 + 20;
        const delay = index * 50;
        setTimeout(() => {
          bar.style.height = height + 'px';
          bar.style.background = `linear-gradient(to top, 
            hsl(${Math.random() * 60 + 15}, 70%, 50%), 
            hsl(${Math.random() * 60 + 35}, 80%, 60%))`;
        }, delay);
      });
      
      // Repeat animation
      setTimeout(animateWaveformBars, 2000);
    }

    // Auto-save with beforeunload
    window.addEventListener('beforeunload', () => {
      saveSession();
    });

    // Initialize App
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved session first
      const sessionLoaded = loadSession();
      
      // Initialize PWA
      initializePWA();
      
      // Dark mode support
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
      }
      
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      });
      
      // Smooth scrolling navbar
      let lastScrollTop = 0;
      window.addEventListener('scroll', function() {
        let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const navbar = document.getElementById('navbar');
        
        if (scrollTop > lastScrollTop) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
        lastScrollTop = scrollTop;
      });
      
      // Initialize content with loading delay
      setTimeout(() => {
        hideLoading();
        loadArtists();
        loadCourses();
        loadDashboard();
        initializeStudio();
        initializeMagenta(); // Load AI models
        
        if (!sessionLoaded) {
          showNotification('üéµ Welcome to AfroVibe AI!', 'success');
        }
      }, 1000);
    });
  </script>

</body>
</html>
