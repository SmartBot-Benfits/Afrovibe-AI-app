<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AfroVibe AI - Professional Afrobeat Music Platform</title>
  <meta name="theme-color" content="#0f0c29">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/wavesurfer.js@7"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-orange: #ff9f1c;
      --primary-gold: #ffbf69;
      --primary-crimson: #dc143c;
      --primary-indigo: #302b63;
      --dark-bg: #0f0c29;
      --card-bg: rgba(255, 255, 255, 0.05);
      --border-glow: rgba(255, 159, 28, 0.3);
      --text-light: #fff;
      --text-secondary: #b8b8b8;
      --success: #88cc88;
      --warning: #ffbf69;
      --error: #ff6b6b;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--dark-bg), var(--primary-indigo), #24243e);
      color: var(--text-light);
      overflow-x: hidden;
      scroll-behavior: smooth;
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      body { filter: brightness(0.9); }
    }

    /* Navigation */
    nav {
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(20px);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 999;
      display: flex;
      justify-content: space-between;
      padding: 1rem 2rem;
      align-items: center;
      border-bottom: 2px solid var(--primary-orange);
      transition: all 0.3s ease;
    }

    nav.scrolled {
      background: rgba(0, 0, 0, 0.95);
      padding: 0.8rem 2rem;
    }

    nav .logo {
      font-size: 1.8rem;
      font-weight: bold;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    nav .logo:hover {
      transform: scale(1.05);
      filter: drop-shadow(0 0 10px var(--primary-orange));
    }

    nav ul {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    nav ul li a {
      color: var(--text-light);
      text-decoration: none;
      transition: all 0.3s ease;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      position: relative;
      font-weight: 500;
    }

    nav ul li a:hover, nav ul li a.active {
      color: var(--primary-orange);
      background: rgba(255, 159, 28, 0.1);
      box-shadow: 0 0 15px rgba(255, 159, 28, 0.3);
    }

    nav .user-menu {
      position: relative;
      display: none;
    }

    nav .user-menu.logged-in {
      display: block;
    }

    nav .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    nav .user-avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px var(--primary-orange);
    }

    /* Mobile Navigation */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.5rem;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn { display: block; }
      nav ul { 
        display: none; 
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.95);
        flex-direction: column;
        padding: 1rem;
      }
      nav ul.mobile-open { display: flex; }
    }

    /* Page Container */
    .page {
      display: none;
      min-height: 100vh;
      padding-top: 100px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    .page.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
    }

    .loading-overlay.active {
      display: flex;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid var(--border-glow);
      border-top-color: var(--primary-orange);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 2rem;
      position: relative;
      background: radial-gradient(circle at center, rgba(255, 159, 28, 0.1) 0%, transparent 70%);
    }

    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 5rem);
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold), var(--primary-crimson));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1.5rem;
      animation: glow 3s ease-in-out infinite alternate;
      line-height: 1.2;
    }

    @keyframes glow {
      from { filter: drop-shadow(0 0 20px var(--primary-orange)); }
      to { filter: drop-shadow(0 0 40px var(--primary-crimson)); }
    }

    .hero p {
      font-size: 1.4rem;
      margin-bottom: 3rem;
      max-width: 700px;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    /* Music Visualizer */
    .music-visualizer {
      display: flex;
      justify-content: center;
      align-items: end;
      gap: 3px;
      height: 100px;
      margin: 3rem 0;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 20px;
      border: 1px solid var(--border-glow);
    }

    .bar {
      width: 5px;
      background: linear-gradient(to top, var(--primary-orange), var(--primary-gold));
      border-radius: 3px;
      animation: dance 0.8s ease-in-out infinite alternate;
      filter: drop-shadow(0 0 5px var(--primary-orange));
    }

    .bar:nth-child(odd) { animation-delay: 0.1s; }
    .bar:nth-child(even) { animation-delay: 0.3s; }
    .bar:nth-child(3n) { animation-delay: 0.5s; }

    @keyframes dance {
      0% { height: 15px; }
      100% { height: 70px; }
    }

    /* Buttons */
    .btn {
      padding: 1rem 2rem;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 30px;
      cursor: pointer;
      margin: 0.5rem;
      transition: all 0.3s ease;
      font-size: 1rem;
      box-shadow: 0 4px 15px rgba(255, 159, 28, 0.3);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(255, 159, 28, 0.5);
    }

    .btn:active {
      transform: translateY(-1px) scale(1.02);
    }

    .btn-secondary {
      background: linear-gradient(45deg, var(--primary-crimson), #ff6b6b);
    }

    .btn-dark {
      background: linear-gradient(45deg, #2c2c54, #40407a);
    }

    .btn-success {
      background: linear-gradient(45deg, var(--success), #66bb6a);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Sections */
    section {
      padding: 4rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section-title {
      text-align: center;
      font-size: 2.8rem;
      margin-bottom: 4rem;
      background: linear-gradient(45deg, var(--primary-gold), var(--primary-orange));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      position: relative;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      border-radius: 2px;
    }

    /* Grid Layouts */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .grid-2 {
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    }

    .grid-3 {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border: 2px solid var(--border-glow);
      padding: 2rem;
      border-radius: 20px;
      text-align: center;
      transition: all 0.4s ease;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.05), rgba(220, 20, 60, 0.05));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .card:hover::before {
      opacity: 1;
    }

    .card:hover {
      transform: translateY(-15px) rotateX(2deg);
      box-shadow: 0 25px 50px rgba(255, 159, 28, 0.3);
      border-color: var(--primary-orange);
    }

    .card h3 {
      color: var(--primary-gold);
      margin-bottom: 1rem;
      font-size: 1.3rem;
    }

    .card p {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    /* Studio Interface */
    .studio-container {
      background: rgba(0, 0, 0, 0.4);
      padding: 3rem;
      border-radius: 25px;
      margin: 2rem 0;
      border: 2px solid var(--border-glow);
    }

    .studio-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .studio-title {
      font-size: 1.8rem;
      color: var(--primary-gold);
    }

    .studio-status {
      padding: 0.5rem 1rem;
      background: rgba(136, 204, 136, 0.2);
      border: 1px solid var(--success);
      border-radius: 20px;
      color: var(--success);
      font-size: 0.9rem;
    }

    .studio-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .control-group {
      background: rgba(255, 255, 255, 0.05);
      padding: 1.5rem;
      border-radius: 15px;
      border: 1px solid var(--border-glow);
    }

    .control-group h4 {
      color: var(--primary-orange);
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    /* Waveform Display */
    .waveform-container {
      background: rgba(0, 0, 0, 0.6);
      padding: 2rem;
      border-radius: 15px;
      margin: 2rem 0;
      border: 2px solid var(--border-glow);
      position: relative;
      overflow: hidden;
    }

    .waveform {
      height: 120px;
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.1), rgba(220, 20, 60, 0.1));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .waveform-bars {
      display: flex;
      align-items: end;
      gap: 2px;
      height: 80px;
    }

    .waveform-bar {
      width: 3px;
      background: linear-gradient(to top, var(--primary-orange), var(--primary-gold));
      border-radius: 2px;
      transition: height 0.3s ease;
    }

    .waveform-animation {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, 
        transparent 0%, 
        rgba(255, 159, 28, 0.4) 50%, 
        transparent 100%);
      animation: wave 2s linear infinite;
      display: none;
    }

    @keyframes wave {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Output Logs */
    .output-section {
      background: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 15px;
      margin: 2rem 0;
      border: 1px solid var(--border-glow);
    }

    .output-logs {
      background: rgba(0, 0, 0, 0.8);
      padding: 1rem;
      border-radius: 10px;
      height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      border: 1px solid var(--primary-orange);
    }

    .output-logs::-webkit-scrollbar {
      width: 8px;
    }

    .output-logs::-webkit-scrollbar-track {
      background: rgba(255, 159, 28, 0.1);
      border-radius: 4px;
    }

    .output-logs::-webkit-scrollbar-thumb {
      background: var(--primary-orange);
      border-radius: 4px;
    }

    /* Artist Profiles */
    .artist-card {
      background: linear-gradient(135deg, rgba(255, 159, 28, 0.1), rgba(220, 20, 60, 0.1));
      padding: 2rem;
      border-radius: 20px;
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid var(--border-glow);
      position: relative;
    }

    .artist-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(255, 159, 28, 0.3);
    }

    .artist-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      margin: 0 auto 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      border: 3px solid var(--primary-gold);
      position: relative;
    }

    .artist-status {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 20px;
      height: 20px;
      background: var(--success);
      border-radius: 50%;
      border: 2px solid white;
    }

    .artist-stats {
      display: flex;
      justify-content: space-around;
      margin: 1rem 0;
      font-size: 0.9rem;
    }

    .stat {
      text-align: center;
    }

    .stat-number {
      font-weight: bold;
      color: var(--primary-orange);
      font-size: 1.2rem;
    }

    .stat-label {
      color: var(--text-secondary);
    }

    /* Dashboard */
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .dashboard-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      background: rgba(0, 0, 0, 0.3);
      padding: 0.5rem;
      border-radius: 25px;
      border: 1px solid var(--border-glow);
    }

    .tab {
      padding: 1rem 2rem;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      margin: 0.5rem;
      border-radius: 20px;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .tab.active {
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      color: white;
      box-shadow: 0 4px 15px rgba(255, 159, 28, 0.3);
    }

    .dashboard-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .dashboard-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Project Cards */
    .project-card {
      background: var(--card-bg);
      padding: 1.5rem;
      border-radius: 15px;
      border: 2px solid var(--border-glow);
      transition: all 0.3s ease;
      position: relative;
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .project-title {
      font-size: 1.2rem;
      color: var(--primary-gold);
    }

    .project-status {
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .status-complete {
      background: rgba(136, 204, 136, 0.2);
      color: var(--success);
      border: 1px solid var(--success);
    }

    .status-progress {
      background: rgba(255, 191, 105, 0.2);
      color: var(--warning);
      border: 1px solid var(--warning);
    }

    .status-draft {
      background: rgba(255, 107, 107, 0.2);
      color: var(--error);
      border: 1px solid var(--error);
    }

    .project-meta {
      display: flex;
      justify-content: space-between;
      margin: 1rem 0;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .project-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }

    /* Search and Filters */
    .search-container {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-input {
      flex: 1;
      min-width: 250px;
      padding: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      font-size: 16px;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary-orange);
      box-shadow: 0 0 20px rgba(255, 159, 28, 0.3);
    }

    .filter-dropdown {
      padding: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      cursor: pointer;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: modalFadeIn 0.3s ease;
    }

    .modal.active {
      display: flex;
    }

    @keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #2c2c54);
      padding: 3rem;
      border-radius: 25px;
      width: 90%;
      max-width: 500px;
      position: relative;
      border: 2px solid var(--primary-orange);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from { transform: translateY(-50px) scale(0.9); }
      to { transform: translateY(0) scale(1); }
    }

    .modal h3 {
      margin-bottom: 2rem;
      color: var(--primary-gold);
      text-align: center;
      font-size: 1.8rem;
    }

    .modal input {
      width: 100%;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .modal input:focus {
      outline: none;
      border-color: var(--primary-orange);
      box-shadow: 0 0 20px rgba(255, 159, 28, 0.3);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 2rem;
      color: var(--primary-orange);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .close-btn:hover {
      transform: scale(1.2);
      color: var(--primary-gold);
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: 100px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      z-index: 3000;
      animation: notificationSlide 0.3s ease;
      max-width: 300px;
    }

    .notification.success {
      background: linear-gradient(45deg, var(--success), #66bb6a);
      border: 1px solid var(--success);
    }

    .notification.warning {
      background: linear-gradient(45deg, var(--warning), #ffa726);
      border: 1px solid var(--warning);
    }

    .notification.error {
      background: linear-gradient(45deg, var(--error), #ef5350);
      border: 1px solid var(--error);
    }

    @keyframes notificationSlide {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Progress Bars */
    .progress-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 0.3rem;
      margin: 1rem 0;
    }

    .progress-bar {
      height: 8px;
      border-radius: 5px;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      transition: width 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: progressShine 2s linear infinite;
    }

    @keyframes progressShine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 3rem 2rem;
      background: linear-gradient(135deg, #000, #1a1a1a);
      color: var(--text-secondary);
      border-top: 2px solid var(--primary-orange);
      margin-top: 4rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--primary-orange);
    }

    /* Onboarding Modal */
    .onboarding-steps {
      display: none;
    }

    .onboarding-steps.active {
      display: block;
    }

    .avatar-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin: 1rem 0;
    }

    .avatar-option {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .avatar-option.selected {
      border: 3px solid var(--primary-gold);
      transform: scale(1.1);
    }

    .avatar-option:hover {
      transform: scale(1.05);
    }

    .role-selector {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }

    .role-btn {
      padding: 1rem;
      border: 2px solid var(--border-glow);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .role-btn.selected {
      background: linear-gradient(45deg, rgba(255, 159, 28, 0.2), rgba(220, 20, 60, 0.2));
      border-color: var(--primary-orange);
    }

    .genre-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .genre-tag {
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .genre-tag.selected {
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-gold));
      color: white;
    }

    /* AI Assistant */
    .ai-assistant {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, var(--primary-orange), var(--primary-crimson));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }

    .ai-assistant:hover {
      transform: scale(1.1);
    }

    .ai-panel {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 300px;
      background: rgba(0, 0, 0, 0.9);
      border-radius: 15px;
      padding: 1rem;
      border: 2px solid var(--primary-orange);
      display: none;
      z-index: 1000;
    }

    .ai-panel.active {
      display: block;
    }

    .ai-message {
      background: rgba(255, 255, 255, 0.1);
      padding: 0.8rem;
      border-radius: 10px;
      margin-bottom: 1rem;
    }

    .ai-input {
      width: 100%;
      padding: 0.8rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid var(--border-glow);
      border-radius: 10px;
      color: white;
      margin-top: 1rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .studio-controls {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
      
      .dashboard-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-container {
        flex-direction: column;
      }
      
      .search-input {
        min-width: auto;
      }
      
      .avatar-options {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .ai-panel {
        width: calc(100% - 40px);
      }
    }

    @media (max-width: 480px) {
      section {
        padding: 2rem 1rem;
      }
      
      .grid {
        grid-template-columns: 1fr;
      }
      
      nav {
        padding: 1rem;
      }
      
      .modal-content {
        padding: 2rem;
        width: 95%;
      }
      
      .role-selector {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div>
      <div class="loading-spinner"></div>
      <p style="margin-top: 1rem; color: var(--primary-orange);">Loading AfroVibe AI...</p>
    </div>
  </div>

  <!-- Navigation -->
  <nav id="navbar">
    <div class="logo" onclick="showPage('home')">AfroVibe AI</div>
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
      <i class="fas fa-bars"></i>
    </button>
    <ul id="navMenu">
      <li><a href="#" onclick="showPage('home')" class="nav-link active">🏠 Home</a></li>
      <li><a href="#" onclick="showPage('studio')" class="nav-link">🎵 Studio</a></li>
      <li><a href="#" onclick="showPage('community')" class="nav-link">🌍 Community</a></li>
      <li><a href="#" onclick="showPage('learn')" class="nav-link">🎓 Learn</a></li>
      <li><a href="#" onclick="showPage('dashboard')" class="nav-link">📊 Dashboard</a></li>
      <li><a href="#" onclick="showPage('profile')" class="nav-link">👤 Profile</a></li>
      <li><a href="#" onclick="openModal()" id="authBtn">🔐 Login</a></li>
    </ul>
    <div class="user-menu" id="userMenu">
      <div class="user-avatar" onclick="toggleUserMenu()">
        <span id="userInitials">U</span>
      </div>
    </div>
  </nav>

  <!-- HOME PAGE -->
  <div id="home" class="page active">
    <section class="hero">
      <h1>Unleash Afrobeat Creativity with AI</h1>
      <p>Join the next-generation Afrobeat music revolution. Collaborate with artists worldwide, learn from masters, and create groundbreaking tracks with AI-powered tools that understand the soul of African rhythms.</p>
      
      <div class="music-visualizer" id="heroVisualizer">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
      </div>

      <div>
        <button class="btn" onclick="showPage('studio')">🎵 Try Studio Now</button>
        <button class="btn btn-secondary" onclick="openModal()">🚀 Join Free</button>
        <button class="btn btn-dark" onclick="showPage('learn')">📚 Learn More</button>
      </div>
    </section>

    <section>
      <h2 class="section-title">✨ Platform Features</h2>
      <div class="grid grid-3">
        <div class="card">
          <i class="fas fa-robot" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>AI Beat Generator</h3>
          <p>Create authentic Afrobeat rhythms with our advanced AI that understands traditional patterns, polyrhythms, and modern fusion styles.</p>
          <button class="btn btn-small" onclick="showPage('studio')">Try Now</button>
        </div>
        <div class="card">
          <i class="fas fa-users" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Global Community</h3>
          <p>Connect with over 10,000+ Afrobeat artists worldwide. Collaborate in real-time and share your musical journey.</p>
          <button class="btn btn-small" onclick="showPage('community')">Explore</button>
        </div>
        <div class="card">
          <i class="fas fa-graduation-cap" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Learn from Masters</h3>
          <p>Access exclusive courses from legendary Afrobeat producers, musicians, and modern innovators in the genre.</p>
          <button class="btn btn-small" onclick="showPage('learn')">Start Learning</button>
        </div>
        <div class="card">
          <i class="fas fa-chart-line" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Analytics Dashboard</h3>
          <p>Track your music's performance, audience engagement, and grow your fanbase with detailed insights and recommendations.</p>
          <button class="btn btn-small" onclick="showPage('dashboard')">View Stats</button>
        </div>
        <div class="card">
          <i class="fas fa-cloud" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Cloud Studio</h3>
          <p>Work from anywhere with our cloud-based studio. Your projects are always saved and accessible across all devices.</p>
          <button class="btn btn-small" onclick="showPage('studio')">Open Studio</button>
        </div>
        <div class="card">
          <i class="fas fa-share-alt" style="font-size: 3rem; color: var(--primary-orange); margin-bottom: 1rem;"></i>
          <h3>Instant Sharing</h3>
          <p>Share your creations instantly to all major platforms. Get discovered and build your audience effortlessly.</p>
          <button class="btn btn-small" onclick="handleShare()">Share Now</button>
        </div>
      </div>
    </section>

    <section>
      <h2 class="section-title">🎯 Getting Started</h2>
      <div class="grid grid-2">
        <div class="card">
          <h3>For Beginners</h3>
          <p>New to Afrobeat? Start with our beginner-friendly tutorials and AI-assisted creation tools.</p>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>✓ Interactive rhythm tutorials</li>
            <li>✓ AI-guided beat creation</li>
            <li>✓ Community mentorship</li>
            <li>✓ Free starter samples</li>
          </ul>
          <button class="btn" onclick="showPage('learn')">Start Journey</button>
        </div>
        <div class="card">
          <h3>For Professionals</h3>
          <p>Advanced tools for professional producers and established artists looking to innovate.</p>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>✓ Professional mixing suite</li>
            <li>✓ Advanced AI features</li>
            <li>✓ Collaboration tools</li>
            <li>✓ Distribution network</li>
          </ul>
          <button class="btn btn-secondary" onclick="showPage('studio')">Enter Studio</button>
        </div>
      </div>
    </section>
  </div>

  <!-- STUDIO PAGE -->
  <div id="studio" class="page">
    <section>
      <h2 class="section-title">🎧 AI Music Studio</h2>
      
      <div class="studio-container">
        <div class="studio-header">
          <div class="studio-title">AfroVibe Studio v2.0</div>
          <div class="studio-status" id="studioStatus">Ready to Create</div>
        </div>

        <div class="studio-controls">
          <div class="control-group">
            <h4>🥁 Rhythm Section</h4>
            <select id="beatStyle" class="filter-dropdown" style="width: 100%; margin-bottom: 0.5rem;">
              <option value="traditional">Traditional Afrobeat</option>
              <option value="modern">Modern Afro-Fusion</option>
              <option value="dance">Afro-Dancehall</option>
              <option value="jazz">Afro-Jazz</option>
            </select>
            <button class="btn btn-small" onclick="generateBeat()">Generate Beat</button>
            <button class="btn btn-small" onclick="studioAction('addPercussion')">Add Percussion</button>
          </div>
          
          <div class="control-group">
            <h4>🎹 Melody &amp; Harmony</h4>
            <button class="btn btn-small" onclick="studioAction('addMelody')">Add Melody</button>
            <button class="btn btn-small" onclick="studioAction('addBass')">Add Bass</button>
            <button class="btn btn-small" onclick="studioAction('addBrass')">Add Brass</button>
          </div>
          
          <div class="control-group">
            <h4>🎤 Vocals &amp; Effects</h4>
            <button class="btn btn-small" onclick="studioAction('recordVocal')">Record Vocal</button>
            <button class="btn btn-small" onclick="studioAction('addEffects')">Add Effects</button>
            <button class="btn btn-small" onclick="studioAction('addChorus')">Add Chorus</button>
          </div>
          
          <div class="control-group">
            <h4>⚡ AI Tools</h4>
            <button class="btn btn-small" onclick="studioAction('aiSuggest')">AI Suggest</button>
            <button class="btn btn-small" onclick="studioAction('autoMix')">Auto Mix</button>
            <button class="btn btn-small" onclick="studioAction('masterTrack')">Master Track</button>
          </div>

          <div class="control-group">
            <h4>▶️ Playback</h4>
            <button class="btn btn-secondary btn-small" onclick="studioAction('play')" id="playBtn">Play</button>
            <button class="btn btn-dark btn-small" onclick="studioAction('pause')" id="pauseBtn">Pause</button>
            <button class="btn btn-small" onclick="studioAction('stop')" id="stopBtn">Stop</button>
          </div>
          
          <div class="control-group">
            <h4>💾 Export &amp; Share</h4>
            <button class="btn btn-small" onclick="studioAction('export')">Export</button>
            <button class="btn btn-success btn-small" onclick="studioAction('share')">Share</button>
            <button class="btn btn-dark btn-small" onclick="saveProject()">Save Project</button>
          </div>
        </div>

        <div class="waveform-container">
          <h4 style="margin-bottom: 1rem; color: var(--primary-gold);">🎵 Track Visualization</h4>
          <div id="waveform"></div>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
            <span style="color: var(--text-secondary);">Duration: <span id="trackDuration">00:00</span></span>
            <span style="color: var(--text-secondary);">BPM: <span id="trackBPM">120</span></span>
            <span style="color: var(--text-secondary);">Key: <span id="trackKey">A Minor</span></span>
          </div>
        </div>

        <div class="output-section">
          <h4 style="margin-bottom: 1rem; color: var(--primary-gold);">📄 Studio Activity Log</h4>
          <div class="output-logs" id="outputLogs">
            <div style="color: var(--primary-orange);">[12:34:56] System initialized - AfroVibe Studio v2.0</div>
            <div style="color: var(--success);">[12:34:57] AI engine loaded - Traditional Afrobeat patterns ready</div>
            <div style="color: var(--success);">[12:34:58] Studio ready - Start creating your next hit!</div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
          <button class="btn" onclick="saveProject()">💾 Save Project</button>
          <button class="btn btn-secondary" onclick="newProject()">🆕 New Project</button>
          <button class="btn btn-dark" onclick="loadProject()">📂 Load Project</button>
        </div>
      </div>
    </section>
  </div>

  <!-- COMMUNITY PAGE -->
  <div id="community" class="page">
    <section>
      <h2 class="section-title">🌍 Global Artist Community</h2>
      
      <div class="search-container">
        <input type="text" class="search-input" placeholder="🔍 Search artists, tracks, or genres..." onkeyup="searchArtists(this.value)">
        <select class="filter-dropdown" onchange="filterArtists(this.value)">
          <option value="all">All Regions</option>
          <option value="africa">Africa</option>
          <option value="europe">Europe</option>
          <option value="americas">Americas</option>
          <option value="asia">Asia &amp; Oceania</option>
        </select>
        <button class="btn" onclick="joinCommunity()">🤝 Join Community</button>
      </div>

      <div class="grid" id="artistGrid">
        <!-- Artists will be populated by JavaScript -->
      </div>

      <div style="text-align: center; margin-top: 3rem;">
        <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">🎉 Community Stats</h3>
        <div class="grid grid-3">
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">12,547</h3>
            <p>Active Artists</p>
          </div>
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">45,892</h3>
            <p>Tracks Created</p>
          </div>
          <div class="card">
            <h3 style="color: var(--primary-orange); font-size: 2.5rem;">89</h3>
            <p>Countries</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- LEARN PAGE -->
  <div id="learn" class="page">
    <section>
      <h2 class="section-title">🎓 Learn Afrobeat Mastery</h2>
      
      <div class="search-container">
        <input type="text" class="search-input" placeholder="🔍 Search courses..." onkeyup="searchCourses(this.value)">
        <select class="filter-dropdown" onchange="filterCourses(this.value)">
          <option value="all">All Levels</option>
          <option value="beginner">Beginner</option>
          <option value="intermediate">Intermediate</option>
          <option value="advanced">Advanced</option>
        </select>
      </div>

      <div class="grid" id="coursesGrid">
        <!-- Courses will be populated by JavaScript -->
      </div>

      <div style="margin-top: 4rem;">
        <h3 class="section-title">🎯 Learning Paths</h3>
        <div class="grid grid-2">
          <div class="card">
            <h3>🎵 Producer Path</h3>
            <p>Complete journey from beginner to professional Afrobeat producer</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            <p style="margin: 1rem 0;">6 Courses • 24 weeks • Certificate included</p>
            <button class="btn" onclick="startLearningPath('producer')">Start Path</button>
          </div>
          <div class="card">
            <h3>🎤 Artist Path</h3>
            <p>Master vocal techniques, songwriting, and performance skills</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            <p style="margin: 1rem 0;">5 Courses • 20 weeks • Certificate included</p>
            <button class="btn" onclick="startLearningPath('artist')">Start Path</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- DASHBOARD PAGE -->
  <div id="dashboard" class="page">
    <section>
      <div class="dashboard-header">
        <h2 class="section-title">📊 Your Creative Dashboard</h2>
        <button class="btn" onclick="showPage('studio')">🎵 Create New Track</button>
      </div>
      
      <div class="dashboard-tabs">
        <button class="tab active" onclick="showDashboardTab('overview')">📈 Overview</button>
        <button class="tab" onclick="showDashboardTab('projects')">🎵 My Projects</button>
        <button class="tab" onclick="showDashboardTab('collaborations')">🤝 Collaborations</button>
        <button class="tab" onclick="showDashboardTab('analytics')">📊 Analytics</button>
      </div>

      <div id="overview" class="dashboard-content active">
        <div class="grid grid-3">
          <div class="card">
            <h3>Total Streams</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">124.7K</h2>
            <p style="color: var(--success);">+23% this week</p>
          </div>
          <div class="card">
            <h3>Active Projects</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">8</h2>
            <p style="color: var(--warning);">2 pending review</p>
          </div>
          <div class="card">
            <h3>Community Rank</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">#247</h2>
            <p style="color: var(--success);">Rising star!</p>
          </div>
        </div>

        <div style="margin-top: 3rem;">
          <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">🎯 Recent Activity</h3>
          <div class="grid grid-2">
            <div class="card">
              <h4>🎵 Latest Track Performance</h4>
              <p><strong>"Lagos Nights"</strong> - Released 2 days ago</p>
              <div class="progress-container">
                <div class="progress-bar" style="width: 78%"></div>
              </div>
              <p>2,450 plays • 89 likes • 23 shares</p>
            </div>
            <div class="card">
              <h4>🏆 Achievements</h4>
              <p>🎖️ <strong>Beat Master</strong> - Created 10 beats this month</p>
              <p>🌟 <strong>Community Star</strong> - Top 5% engagement</p>
              <p>🎓 <strong>Quick Learner</strong> - Completed 3 courses</p>
            </div>
          </div>
        </div>
      </div>

      <div id="projects" class="dashboard-content">
        <div class="search-container">
          <input type="text" class="search-input" placeholder="🔍 Search your projects..." onkeyup="searchProjects(this.value)">
          <select class="filter-dropdown" onchange="filterProjects(this.value)">
            <option value="all">All Status</option>
            <option value="complete">Complete</option>
            <option value="progress">In Progress</option>
            <option value="draft">Draft</option>
          </select>
        </div>
        <div class="grid" id="projectsGrid">
          <!-- Projects will be populated by JavaScript -->
        </div>
      </div>

      <div id="collaborations" class="dashboard-content">
        <div class="grid" id="collaborationsGrid">
          <!-- Collaborations will be populated by JavaScript -->
        </div>
      </div>

      <div id="analytics" class="dashboard-content">
        <div class="grid">
          <div class="card">
            <h3>Monthly Listeners</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">8,934</h2>
            <p style="color: var(--success);">+15% from last month</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 67%"></div>
            </div>
          </div>
          <div class="card">
            <h3>Top Geography</h3>
            <h2 style="color: var(--primary-orange); font-size: 2rem;">🇳🇬 Nigeria</h2>
            <p>34% of total streams</p>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">🇬🇭 Ghana (18%) • 🇬🇧 UK (12%) • 🇺🇸 USA (10%)</p>
          </div>
          <div class="card">
            <h3>Engagement Rate</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">12.3%</h2>
            <p style="color: var(--success);">Above average</p>
            <div class="progress-container">
              <div class="progress-bar" style="width: 82%"></div>
            </div>
          </div>
          <div class="card">
            <h3>Revenue This Month</h3>
            <h2 style="color: var(--primary-orange); font-size: 3rem;">$340</h2>
            <p style="color: var(--success);">+28% growth</p>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">Streams: $280 • Tips: $60</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- PROFILE PAGE -->
  <div id="profile" class="page">
    <section>
      <h2 class="section-title">👤 Your Profile</h2>
      
      <div class="grid grid-2">
        <div class="card">
          <div class="artist-avatar" style="margin-bottom: 2rem;">
            <span id="profileAvatar">🎵</span>
          </div>
          <h3 id="profileName">Music Creator</h3>
          <p id="profileLocation">Lagos, Nigeria</p>
          <p id="profileRole" style="color: var(--primary-gold);">Afrobeat Producer</p>
          <div class="artist-stats">
            <div class="stat">
              <div class="stat-number">12</div>
              <div class="stat-label">Tracks</div>
            </div>
            <div class="stat">
              <div class="stat-number">1.2K</div>
              <div class="stat-label">Followers</div>
            </div>
            <div class="stat">
              <div class="stat-number">89</div>
              <div class="stat-label">Following</div>
            </div>
          </div>
          <button class="btn" onclick="editProfile()">✏️ Edit Profile</button>
        </div>
        
        <div class="card">
          <h3>⚙️ Account Settings</h3>
          <div style="text-align: left;">
            <h4 style="color: var(--primary-orange); margin: 1rem 0;">Notifications</h4>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked=""> New collaboration requests
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked=""> Track performance updates
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox"> Weekly digest emails
            </label>
            
            <h4 style="color: var(--primary-orange); margin: 1rem 0;">Privacy</h4>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox" checked=""> Public profile
            </label>
            <label style="display: block; margin: 0.5rem 0;">
              <input type="checkbox"> Show online status
            </label>
          </div>
          <button class="btn btn-secondary" onclick="saveSettings()">💾 Save Settings</button>
        </div>
      </div>

      <div style="margin-top: 3rem;">
        <h3 style="color: var(--primary-gold); margin-bottom: 2rem;">🎵 Your Latest Tracks</h3>
        <div class="grid" id="userTracksGrid">
          <!-- User tracks will be populated by JavaScript -->
        </div>
      </div>
    </section>
  </div>

  <!-- AUTH MODAL -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <div class="close-btn" onclick="closeModal()">×</div>
      <h3 id="modalTitle">Login to AfroVibe</h3>
      <div id="loginForm" class="onboarding-steps active">
        <input type="email" id="emailInput" placeholder="Email Address">
        <input type="password" id="passwordInput" placeholder="Password">
        <button class="btn" onclick="handleAuth()" id="authSubmit">Login</button>
        <div style="text-align: center; margin-top: 1rem;">
          <a href="#" onclick="toggleAuthMode()" style="color: var(--primary-orange);" id="toggleText">Don't have an account? Sign up</a>
        </div>
      </div>
      
      <div id="onboardingForm" class="onboarding-steps">
        <div id="onboardingStep1" class="onboarding-steps active">
          <h3 style="margin-bottom: 1rem;">Welcome to AfroVibe!</h3>
          <p style="color: var(--text-secondary); margin-bottom: 1rem;">Let's set up your profile</p>
          <input type="text" id="nameInput" placeholder="Full Name">
          <input type="email" id="signupEmail" placeholder="Email Address">
          <input type="password" id="signupPassword" placeholder="Create Password">
          <button class="btn" onclick="nextOnboardingStep(2)">Next</button>
        </div>
        
        <div id="onboardingStep2" class="onboarding-steps">
          <h3 style="margin-bottom: 1rem;">Choose Your Avatar</h3>
          <p style="color: var(--text-secondary); margin-bottom: 1rem;">Select an avatar that represents you</p>
          <div class="avatar-options">
            <div class="avatar-option" onclick="selectAvatar('👩🏿‍🎤')">👩🏿‍🎤</div>
            <div class="avatar-option" onclick="selectAvatar('👨🏿‍🎤')">👨🏿‍🎤</div>
            <div class="avatar-option" onclick="selectAvatar('👩🏾‍🎤')">👩🏾‍🎤</div>
            <div class="avatar-option" onclick="selectAvatar('👨🏾‍🎤')">👨🏾‍🎤</div>
            <div class="avatar-option" onclick="selectAvatar('👩🏽‍🎤')">👩🏽‍🎤</div>
            <div class="avatar-option" onclick="selectAvatar('👨🏽‍🎤')">👨🏽‍🎤</div>
          </div>
          <button class="btn" onclick="nextOnboardingStep(3)">Next</button>
          <button class="btn btn-dark" onclick="nextOnboardingStep(1)">Back</button>
        </div>
        
        <div id="onboardingStep3" class="onboarding-steps">
          <h3 style="margin-bottom: 1rem;">Your Music Role</h3>
          <p style="color: var(--text-secondary); margin-bottom: 1rem;">What best describes you?</p>
          <div class="role-selector">
            <div class="role-btn" onclick="selectRole('artist')">
              <i class="fas fa-microphone" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
              <p>Artist</p>
            </div>
            <div class="role-btn" onclick="selectRole('producer')">
              <i class="fas fa-sliders-h" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
              <p>Producer</p>
            </div>
            <div class="role-btn" onclick="selectRole('both')">
              <i class="fas fa-user-tie" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
              <p>Both</p>
            </div>
          </div>
          <button class="btn" onclick="nextOnboardingStep(4)">Next</button>
          <button class="btn btn-dark" onclick="nextOnboardingStep(2)">Back</button>
        </div>
        
        <div id="onboardingStep4" class="onboarding-steps">
          <h3 style="margin-bottom: 1rem;">Favorite Genres</h3>
          <p style="color: var(--text-secondary); margin-bottom: 1rem;">Select your preferred music styles</p>
          <div class="genre-tags">
            <div class="genre-tag" onclick="toggleGenre(this)">Afrobeat</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afropop</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afro-Fusion</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afro-Jazz</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afro-House</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Highlife</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afro-Soul</div>
            <div class="genre-tag" onclick="toggleGenre(this)">Afro-R&B</div>
          </div>
          <button class="btn" onclick="completeOnboarding()">Complete Setup</button>
          <button class="btn btn-dark" onclick="nextOnboardingStep(3)">Back</button>
        </div>
      </div>
    </div>
  </div>

  <!-- AI ASSISTANT -->
  <div class="ai-assistant" onclick="toggleAIPanel()">
    <i class="fas fa-robot"></i>
  </div>
  
  <div class="ai-panel" id="aiPanel">
    <div class="ai-message">
      Hi there! I'm your AI music assistant. How can I help you with your Afrobeat creation today?
    </div>
    <input type="text" class="ai-input" placeholder="Ask me anything about music..." id="aiInput">
    <button class="btn btn-small" style="margin-top: 0.5rem;" onclick="askAI()">Ask</button>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="#">About</a>
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="#">Support</a>
        <a href="#">API</a>
        <a href="#">Careers</a>
      </div>
      <p>© 2025 AfroVibe AI • Empowering the Global Afrobeat Community</p>
      <p style="margin-top: 1rem; font-size: 0.9rem;">Built with ❤️ for music creators worldwide</p>
    </div>
  </footer>

  <script>
    // Application State
    let currentPage = 'home';
    let isLoggedIn = false;
    let currentUser = null;
    let isAuthModeLogin = true;
    let isPlaying = false;
    let currentTrack = null;
    let wavesurfer = null;
    let musicVAE = null;
    let drumRNN = null;
    let selectedAvatar = '👩🏿‍🎤';
    let selectedRole = '';
    let selectedGenres = [];
    let onboardingStep = 1;
    
    let studioSession = {
      id: null,
      name: 'Untitled Project',
      tracks: [],
      duration: 0,
      bpm: 120,
      key: 'A Minor',
      genre: 'Afrobeat',
      status: 'draft',
      lastModified: new Date().toLocaleDateString(),
      audioData: null
    };

    // Mock Data
    const artists = [
      { 
        id: 1, name: 'Kemi Adebayo', location: 'Lagos, Nigeria', tracks: 23, followers: 12340, following: 89, 
        avatar: '👩🏿‍🎤', status: 'online', genre: 'Traditional Afrobeat', verified: true,
        bio: 'Grammy-nominated producer specializing in authentic Afrobeat sounds with modern flair.'
      },
      { 
        id: 2, name: 'DJ Kwame', location: 'Accra, Ghana', tracks: 45, followers: 8920, following: 234, 
        avatar: '👨🏿‍🎤', status: 'offline', genre: 'Afro-Fusion', verified: true,
        bio: 'International DJ bringing Afrobeat to global festivals and radio stations.'
      },
      { 
        id: 3, name: 'Amara Music', location: 'London, UK', tracks: 18, followers: 5670, following: 156, 
        avatar: '👩🏾‍🎤', status: 'online', genre: 'Afropop', verified: false,
        bio: 'UK-based artist blending Afrobeat with contemporary pop and R&B influences.'
      },
      { 
        id: 4, name: 'Fela Beats', location: 'NYC, USA', tracks: 67, followers: 18920, following: 345, 
        avatar: '👨🏾‍🎤', status: 'online', genre: 'Neo-Afrobeat', verified: true,
        bio: 'Innovative producer pushing the boundaries of Afrobeat with electronic elements.'
      },
      { 
        id: 5, name: 'Yemi Sounds', location: 'Toronto, Canada', tracks: 31, followers: 7450, following: 123, 
        avatar: '👩🏽‍🎤', status: 'offline', genre: 'Afro-Jazz', verified: false,
        bio: 'Jazz-trained musician creating sophisticated Afrobeat compositions.'
      },
      { 
        id: 6, name: 'Afro Thunder', location: 'Paris, France', tracks: 28, followers: 6560, following: 178, 
        avatar: '👨🏽‍🎤', status: 'online', genre: 'Afrobeat', verified: true,
        bio: 'French-based collective promoting Afrobeat culture across Europe.'
      }
    ];

    const courses = [
      {
        id: 1, title: 'Afrobeat Fundamentals', level: 'beginner', duration: '8 weeks', 
        price: 'Free', instructor: 'Prof. Adebayo', rating: 4.9, students: 12450,
        description: 'Master the essential rhythms, scales, and cultural context of traditional Afrobeat music.',
        modules: ['History & Origins', 'Basic Rhythms', 'Instrumentation', 'Cultural Context']
      },
      {
        id: 2, title: 'Advanced Production Masterclass', level: 'advanced', duration: '12 weeks', 
        price: '$149', instructor: 'DJ Kwame', rating: 4.8, students: 3420,
        description: 'Professional mixing, mastering, and advanced production techniques for studio-quality tracks.',
        modules: ['Advanced Mixing', 'Mastering Secrets', 'Studio Setup', 'Professional Workflow']
      },
      {
        id: 3, title: 'AI Tools Workshop', level: 'intermediate', duration: '6 weeks', 
        price: '$79', instructor: 'Tech Team', rating: 4.7, students: 5670,
        description: 'Harness the power of AI to enhance your creative process and discover new possibilities.',
        modules: ['AI Beat Generation', 'Smart Arrangement', 'Auto-Mixing', 'Creative AI']
      },
      {
        id: 4, title: 'Vocal Techniques & Performance', level: 'intermediate', duration: '10 weeks', 
        price: '$99', instructor: 'Amara Music', rating: 4.8, students: 4230,
        description: 'Develop your vocal skills with traditional and contemporary Afrobeat singing techniques.',
        modules: ['Vocal Training', 'Performance Skills', 'Studio Recording', 'Stage Presence']
      }
    ];

    // Initialize projects from localStorage or use default
    let projects = JSON.parse(localStorage.getItem('afrovibe_projects')) || [
      { 
        id: Date.now(), 
        title: 'Lagos Nights', 
        genre: 'Afrobeat', 
        duration: '3:45', 
        status: 'complete', 
        lastModified: '2 days ago', 
        collaborators: [], 
        plays: 2450, 
        likes: 189,
        audioData: null
      },
      { 
        id: Date.now() + 1,
        title: 'Sunset Vibes', 
        genre: 'Afro-Fusion', 
        duration: '4:12', 
        status: 'progress', 
        lastModified: '5 hours ago', 
        collaborators: ['DJ Kwame'], 
        plays: 0, 
        likes: 0,
        audioData: null
      }
    ];

    const collaborations = [
      { 
        id: 1, title: 'African Unity', collaborator: 'DJ Kwame', status: 'active', 
        progress: 75, deadline: '2024-02-15', lastActivity: '2 hours ago'
      },
      { 
        id: 2, title: 'Global Sounds', collaborator: 'Amara Music', status: 'pending', 
        progress: 25, deadline: '2024-03-01', lastActivity: '1 day ago'
      },
      { 
        id: 3, title: 'Future Beats', collaborator: 'Fela Beats', status: 'complete', 
        progress: 100, deadline: '2024-01-20', lastActivity: '1 week ago'
      }
    ];

    // Initialize AI models
    async function initAIModels() {
      try {
        showLoading();
        musicVAE = new mm.MusicVAE('https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/mel_2bar_small');
        await musicVAE.initialize();
        
        drumRNN = new mm.MusicRNN('https://storage.googleapis.com/magentadata/js/checkpoints/drum_rnn');
        await drumRNN.initialize();
        
        hideLoading();
        console.log('AI models initialized');
      } catch (error) {
        console.error('Error initializing AI models:', error);
        hideLoading();
        showNotification('Error loading AI tools. Please refresh the page.', 'error');
      }
    }

    // Initialize WaveSurfer
    function initWaveSurfer() {
      wavesurfer = WaveSurfer.create({
        container: '#waveform',
        waveColor: '#ffbf69',
        progressColor: '#ff9f1c',
        cursorColor: '#dc143c',
        barWidth: 2,
        barRadius: 3,
        cursorWidth: 1,
        height: 120,
        barGap: 2,
        responsive: true
      });
      
      wavesurfer.on('ready', function() {
        updateStudioStatus('Ready to Play');
        document.getElementById('playBtn').disabled = false;
      });
      
      wavesurfer.on('finish', function() {
        isPlaying = false;
        document.getElementById('playBtn').innerHTML = '▶️ Play';
        updateStudioStatus('Playback Complete');
      });
    }

    // Utility Functions
    function showLoading() {
      document.getElementById('loadingOverlay').classList.add('active');
    }

    function hideLoading() {
      document.getElementById('loadingOverlay').classList.remove('active');
    }

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'notificationSlide 0.3s ease reverse';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    // Navigation Functions
    function showPage(pageId) {
      showLoading();
      
      setTimeout(() => {
        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });
        
        // Show selected page
        document.getElementById(pageId).classList.add('active');
        
        // Update navigation
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
        });
        
        // Find and activate the correct nav link
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
          if (link.onclick && link.onclick.toString().includes(`showPage('${pageId}')`)) {
            link.classList.add('active');
          }
        });
        
        currentPage = pageId;
        
        // Load page-specific content
        switch(pageId) {
          case 'community':
            loadArtists();
            break;
          case 'learn':
            loadCourses();
            break;
          case 'dashboard':
            loadDashboard();
            break;
          case 'studio':
            initializeStudio();
            break;
          case 'profile':
            loadProfile();
            break;
        }
        
        hideLoading();
      }, 500);
    }

    function toggleMobileMenu() {
      const navMenu = document.getElementById('navMenu');
      navMenu.classList.toggle('mobile-open');
    }

    // Studio Functions
    function initializeStudio() {
      if (!wavesurfer) {
        initWaveSurfer();
      }
      
      if (!musicVAE || !drumRNN) {
        initAIModels();
      }
      
      updateStudioStatus('Ready to Create');
      updateTrackInfo();
    }

    async function generateBeat() {
      const style = document.getElementById('beatStyle').value;
      const outputLogs = document.getElementById('outputLogs');
      
      addLog(`🥁 Generating ${style} Afrobeat pattern...`, 'var(--primary-orange)');
      updateStudioStatus('Generating Beat...');
      
      try {
        // Generate a 2-bar drum pattern
        const qns = mm.quantizeNoteSequence(
          await drumRNN.continueSequence(null, 32, 0.5, null, style === 'traditional' ? 0.7 : 0.3),
          4
        );
        
        // Convert to audio
        const audio = await mm.sequenceProtoToMidi(qns);
        const blob = new Blob([audio], { type: 'audio/midi' });
        const url = URL.createObjectURL(blob);
        
        // Load into WaveSurfer
        wavesurfer.load(url);
        
        // Update session
        studioSession.tracks.push('Drum Track');
        studioSession.duration = 8; // 2 bars at 120 BPM
        studioSession.audioData = url;
        studioSession.genre = style;
        
        addLog(`✅ ${style.charAt(0).toUpperCase() + style.slice(1)} Afrobeat pattern generated!`, 'var(--success)');
        updateTrackInfo();
        updateStudioStatus('Beat Generated');
        
        showNotification('🎶 New beat generated! Click play to listen', 'success');
      } catch (error) {
        console.error('Error generating beat:', error);
        addLog('❌ Error generating beat. Please try again.', 'var(--error)');
        updateStudioStatus('Error Generating Beat');
      }
    }

    function updateStudioStatus(status) {
      document.getElementById('studioStatus').textContent = status;
    }

    function studioAction(action) {
      const outputLogs = document.getElementById('outputLogs');
      const trackDuration = document.getElementById('trackDuration');
      const trackBPM = document.getElementById('trackBPM');
      const trackKey = document.getElementById('trackKey');
      
      const timestamp = new Date().toLocaleTimeString();
      
      // Simulate loading
      updateStudioStatus('Processing...');
      
      switch(action) {
        case 'generateBeat':
          generateBeat();
          break;
          
        case 'addPercussion':
          addLog('🪘 Adding traditional percussion instruments...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Talking drums, shekere, and clapsticks added', 'var(--success)');
            studioSession.tracks.push('Percussion');
            updateTrackInfo();
            updateStudioStatus('Percussion Added');
          }, 1800);
          break;
          
        case 'addMelody':
          addLog('🎹 Creating melodic elements with pentatonic scales...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Keyboard melody with traditional scales and modern harmony', 'var(--success)');
            studioSession.tracks.push('Melody');
            updateTrackInfo();
            updateStudioStatus('Melody Composed');
          }, 2200);
          break;
          
        case 'addBass':
          addLog('🎸 Programming bass line with traditional patterns...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Deep bass line synchronized with kick pattern', 'var(--success)');
            studioSession.tracks.push('Bass');
            updateTrackInfo();
            updateStudioStatus('Bass Added');
          }, 1600);
          break;
          
        case 'addBrass':
          addLog('🎺 Adding brass section with punchy stabs...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Horn section added with call-and-response patterns', 'var(--success)');
            studioSession.tracks.push('Brass');
            updateTrackInfo();
            updateStudioStatus('Brass Added');
          }, 2000);
          break;
          
        case 'recordVocal':
          if (!isLoggedIn) {
            showNotification('Please login to record vocals', 'warning');
            openModal();
            return;
          }
          addLog('🎤 Recording vocal track... Stand by', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Vocal recording complete - 45 seconds of pure emotion', 'var(--success)');
            studioSession.tracks.push('Vocals');
            updateTrackInfo();
            updateStudioStatus('Vocals Recorded');
          }, 3000);
          break;
          
        case 'addEffects':
          addLog('⚡ Applying reverb, delay, and compression...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Professional effects applied - Studio quality achieved', 'var(--success)');
            updateStudioStatus('Effects Added');
          }, 1400);
          break;
          
        case 'addChorus':
          addLog('🎶 Adding chorus section with layered vocals...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Powerful chorus added with harmonies and counter-melodies', 'var(--success)');
            studioSession.tracks.push('Chorus');
            updateTrackInfo();
            updateStudioStatus('Chorus Added');
          }, 2500);
          break;
          
        case 'aiSuggest':
          addLog('🤖 AI analyzing your track for suggestions...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('💡 AI suggests: Add brass section in chorus, extend bridge by 8 bars', 'var(--warning)');
            addLog('💡 AI suggests: Consider adding call-and-response vocals', 'var(--warning)');
            updateStudioStatus('AI Analysis Complete');
          }, 2500);
          break;
          
        case 'autoMix':
          addLog('🎛️ AI auto-mixing with professional settings...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Track mixed and mastered - Radio ready quality', 'var(--success)');
            updateStudioStatus('Mix Complete');
          }, 3500);
          break;
          
        case 'masterTrack':
          addLog('🔊 Mastering track with final touches...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Master complete - Ready for distribution', 'var(--success)');
            studioSession.status = 'complete';
            updateStudioStatus('Master Complete');
          }, 4000);
          break;
          
        case 'play':
          if (wavesurfer && wavesurfer.getDuration() > 0) {
            wavesurfer.play();
            isPlaying = true;
            updateStudioStatus('Playing');
            document.getElementById('playBtn').innerHTML = '⏸️ Playing';
          } else {
            showNotification('No audio to play. Generate a beat first!', 'warning');
          }
          break;
          
        case 'pause':
          if (wavesurfer) {
            wavesurfer.pause();
            isPlaying = false;
            updateStudioStatus('Paused');
            document.getElementById('playBtn').innerHTML = '▶️ Play';
          }
          break;
          
        case 'stop':
          if (wavesurfer) {
            wavesurfer.stop();
            isPlaying = false;
            updateStudioStatus('Stopped');
            document.getElementById('playBtn').innerHTML = '▶️ Play';
          }
          break;
          
        case 'export':
          if (studioSession.tracks.length === 0) {
            showNotification('No tracks to export! Create some music first.', 'warning');
            return;
          }
          addLog('📁 Exporting in multiple formats (WAV, MP3, FLAC)...', 'var(--primary-orange)');
          setTimeout(() => {
            addLog('✅ Export complete! Files saved to Downloads folder', 'var(--success)');
            showNotification('Track exported successfully!', 'success');
            updateStudioStatus('Export Complete');
            
            // Simulate download
            if (wavesurfer && wavesurfer.getDuration() > 0) {
              const link = document.createElement('a');
              link.href = wavesurfer.getMediaElement().src;
              link.download = `${studioSession.name.replace(/\s+/g, '_')}.wav`;
              link.click();
            }
          }, 2000);
          break;
          
        case 'share':
          if (studioSession.tracks.length === 0) {
            showNotification('No tracks to share! Create some music first.', 'warning');
            return;
          }
          if (!isLoggedIn) {
            showNotification('Please login to share your tracks', 'warning');
            openModal();
            return;
          }
          addLog('📤 Uploading to AfroVibe community...', 'var(--primary-orange)');
          setTimeout(() => {
            const trackId = Math.random().toString(36).substring(7);
            addLog(`✅ Track shared! Link: afrovibe.ai/track/${trackId}`, 'var(--success)');
            showNotification('Track shared with the community!', 'success');
            updateStudioStatus('Shared Successfully');
            
            // Save as completed project
            if (studioSession.status === 'draft') {
              studioSession.status = 'complete';
              saveProject();
            }
          }, 1500);
          break;
      }
    }

    function updateTrackInfo() {
      const duration = Math.floor(studioSession.duration / 60) + ':' + 
                      (studioSession.duration % 60).toString().padStart(2, '0');
      document.getElementById('trackDuration').textContent = duration;
      document.getElementById('trackBPM').textContent = studioSession.bpm;
      document.getElementById('trackKey').textContent = studioSession.key;
    }

    function addLog(message, color = 'var(--text-light)') {
      const outputLogs = document.getElementById('outputLogs');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.color = color;
      logEntry.innerHTML = `[${timestamp}] ${message}`;
      outputLogs.appendChild(logEntry);
      outputLogs.scrollTop = outputLogs.scrollHeight;
    }

    function saveProject() {
      if (!isLoggedIn) {
        showNotification('Please login to save projects', 'warning');
        openModal();
        return;
      }
      
      if (studioSession.tracks.length === 0) {
        showNotification('No tracks to save! Create some music first.', 'warning');
        return;
      }
      
      const projectName = prompt('Enter project name:', studioSession.name) || 'Untitled Project';
      studioSession.name = projectName;
      studioSession.id = studioSession.id || Date.now();
      studioSession.lastModified = new Date().toLocaleDateString();
      
      addLog(`💾 Saving project "${projectName}"...`, 'var(--primary-orange)');
      
      // Check if this is an existing project
      const existingIndex = projects.findIndex(p => p.id === studioSession.id);
      
      if (existingIndex >= 0) {
        // Update existing project
        projects[existingIndex] = {...studioSession};
      } else {
        // Add new project
        projects.unshift({...studioSession});
      }
      
      // Save to localStorage
      localStorage.setItem('afrovibe_projects', JSON.stringify(projects));
      
      addLog('✅ Project saved successfully!', 'var(--success)');
      showNotification(`Project "${projectName}" saved!`, 'success');
      updateStudioStatus('Project Saved');
      
      // Update dashboard if open
      if (currentPage === 'dashboard') {
        loadProjects();
      }
    }

    function newProject() {
      if (studioSession.tracks.length > 0) {
        if (!confirm('Start a new project? Unsaved changes will be lost.')) {
          return;
        }
      }
      
      studioSession = { 
        id: null,
        name: 'Untitled Project',
        tracks: [], 
        duration: 0, 
        bpm: 120, 
        key: 'A Minor',
        genre: 'Afrobeat',
        status: 'draft',
        lastModified: new Date().toLocaleDateString(),
        audioData: null
      };
      
      document.getElementById('outputLogs').innerHTML = `
        <div style="color: var(--primary-orange);">[${new Date().toLocaleTimeString()}] New project started</div>
        <div style="color: var(--success);">[${new Date().toLocaleTimeString()}] Studio ready for creation</div>
      `;
      
      if (wavesurfer) {
        wavesurfer.empty();
      }
      
      updateTrackInfo();
      updateStudioStatus('New Project');
    }

    function loadProject() {
      if (!isLoggedIn) {
        showNotification('Please login to load projects', 'warning');
        openModal();
        return;
      }
      
      showPage('dashboard');
      showDashboardTab('projects');
    }

    function openProject(projectId) {
      const project = projects.find(p => p.id === projectId);
      if (!project) return;
      
      studioSession = {...project};
      
      if (studioSession.audioData && wavesurfer) {
        wavesurfer.load(studioSession.audioData);
      }
      
      updateTrackInfo();
      updateStudioStatus('Project Loaded');
      
      document.getElementById('outputLogs').innerHTML = `
        <div style="color: var(--primary-orange);">[${new Date().toLocaleTimeString()}] Project "${studioSession.name}" loaded</div>
      `;
      
      showPage('studio');
      showNotification(`Project "${studioSession.name}" loaded`, 'success');
    }

    // Community Functions
    function loadArtists() {
      const artistGrid = document.getElementById('artistGrid');
      artistGrid.innerHTML = '';
      
      artists.forEach(artist => {
        const artistCard = document.createElement('div');
        artistCard.className = 'artist-card';
        artistCard.innerHTML = `
          <div class="artist-avatar">
            ${artist.avatar}
            <div class="artist-status" style="background: ${artist.status === 'online' ? 'var(--success)' : '#666'};"></div>
          </div>
          <h3>${artist.name} ${artist.verified ? '✓' : ''}</h3>
          <p style="color: var(--primary-gold); margin: 0.5rem 0;">${artist.location}</p>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 1rem 0;">${artist.genre}</p>
          <div class="artist-stats">
            <div class="stat">
              <div class="stat-number">${artist.tracks}</div>
              <div class="stat-label">Tracks</div>
            </div>
            <div class="stat">
              <div class="stat-number">${formatNumber(artist.followers)}</div>
              <div class="stat-label">Followers</div>
            </div>
            <div class="stat">
              <div class="stat-number">${artist.following}</div>
              <div class="stat-label">Following</div>
            </div>
          </div>
          <p style="color: var(--text-secondary); font-size: 0.8rem; margin: 1rem 0; line-height: 1.4;">${artist.bio}</p>
          <div style="margin-top: 1rem;">
            <button class="btn btn-small" onclick="connectArtist('${artist.name}')">🤝 Connect</button>
            <button class="btn btn-secondary btn-small" onclick="viewProfile(${artist.id})">👁️ View</button>
          </div>
        `;
        artistGrid.appendChild(artistCard);
      });
    }

    function searchArtists(query) {
      const artistCards = document.querySelectorAll('.artist-card');
      artistCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterArtists(region) {
      const artistCards = document.querySelectorAll('.artist-card');
      artistCards.forEach((card, index) => {
        const artist = artists[index];
        if (region === 'all') {
          card.style.display = 'block';
        } else {
          const show = (region === 'africa' && (artist.location.includes('Nigeria') || artist.location.includes('Ghana'))) ||
                       (region === 'europe' && (artist.location.includes('UK') || artist.location.includes('France'))) ||
                       (region === 'americas' && (artist.location.includes('USA') || artist.location.includes('Canada')));
          card.style.display = show ? 'block' : 'none';
        }
      });
    }

    function joinCommunity() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification('🎉 Welcome to the AfroVibe community!', 'success');
    }

    function connectArtist(artistName) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification(`🤝 Connection request sent to ${artistName}!`, 'success');
    }

    function viewProfile(artistId) {
      const artist = artists.find(a => a.id === artistId);
      alert(`👁️ Viewing ${artist.name}'s profile\n\n${artist.bio}\n\n📍 ${artist.location}\n🎵 ${artist.tracks} tracks\n👥 ${formatNumber(artist.followers)} followers`);
    }

    // Learn Functions
    function loadCourses() {
      const coursesGrid = document.getElementById('coursesGrid');
      coursesGrid.innerHTML = '';
      
      courses.forEach(course => {
        const courseCard = document.createElement('div');
        courseCard.className = 'card';
        courseCard.innerHTML = `
          <h3>${course.title}</h3>
          <p style="color: var(--primary-orange);">Level: ${course.level.charAt(0).toUpperCase() + course.level.slice(1)}</p>
          <p style="color: var(--text-secondary); margin: 1rem 0;">${course.description}</p>
          <div style="margin: 1rem 0;">
            <p>👨‍🏫 <strong>${course.instructor}</strong></p>
            <p>⏱️ ${course.duration} • ⭐ ${course.rating} • 👥 ${formatNumber(course.students)} students</p>
          </div>
          <h4 style="color: var(--primary-gold); margin: 1rem 0;">${course.price}</h4>
          <div style="text-align: left; margin: 1rem 0;">
            <h5 style="color: var(--primary-orange);">Modules:</h5>
            <ul style="margin-left: 1rem;">
              ${course.modules.map(module => `<li>${module}</li>`).join('')}
            </ul>
          </div>
          <button class="btn" onclick="enrollCourse('${course.title}', '${course.price}')">${course.price === 'Free' ? '📚 Enroll Free' : '💳 Enroll Now'}</button>
        `;
        coursesGrid.appendChild(courseCard);
      });
    }

    function searchCourses(query) {
      const courseCards = document.querySelectorAll('#coursesGrid .card');
      courseCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterCourses(level) {
      const courseCards = document.querySelectorAll('#coursesGrid .card');
      courseCards.forEach((card, index) => {
        const course = courses[index];
        if (level === 'all' || course.level === level) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function enrollCourse(courseTitle, price) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      
      if (price !== 'Free') {
        alert(`💳 Enrollment in "${courseTitle}" for ${price}\n\nThis would normally redirect to payment processing.`);
      } else {
        showNotification(`🎓 Enrolled in "${courseTitle}"! Check your dashboard.`, 'success');
      }
    }

    function startLearningPath(path) {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      
      const pathNames = {
        'producer': 'Producer Path',
        'artist': 'Artist Path'
      };
      
      showNotification(`🎯 Started ${pathNames[path]}! Your journey begins now.`, 'success');
    }

    // Dashboard Functions
    function loadDashboard() {
      loadProjects();
      loadCollaborations();
      loadUserTracks();
    }

    function loadProjects() {
      const projectsGrid = document.getElementById('projectsGrid');
      projectsGrid.innerHTML = '';
      
      projects.forEach((project, index) => {
        const projectCard = document.createElement('div');
        projectCard.className = 'project-card';
        
        const statusClass = project.status === 'complete' ? 'status-complete' : 
                           project.status === 'progress' ? 'status-progress' : 'status-draft';
        
        projectCard.innerHTML = `
          <div class="project-header">
            <h3 class="project-title">${project.name}</h3>
            <span class="project-status ${statusClass}">${project.status}</span>
          </div>
          <div class="project-meta">
            <span>🎵 ${project.genre}</span>
            <span>⏱️ ${project.duration}</span>
          </div>
          <p style="color: var(--text-secondary); margin: 1rem 0;">
            Modified ${project.lastModified}
            ${project.collaborators.length > 0 ? `• With ${project.collaborators.join(', ')}` : ''}
          </p>
          ${project.status === 'complete' ? `
            <div style="margin: 1rem 0;">
              <p style="color: var(--success);">▶️ ${formatNumber(project.plays)} plays • ❤️ ${project.likes} likes</p>
            </div>
          ` : ''}
          <div class="project-actions">
            <button class="btn btn-small" onclick="openProject(${project.id})">✏️ Open</button>
            <button class="btn btn-secondary btn-small" onclick="shareProject(${index})">📤 Share</button>
            ${project.status === 'complete' ? '<button class="btn btn-dark btn-small" onclick="viewStats(' + index + ')">📊 Stats</button>' : ''}
          </div>
        `;
        projectsGrid.appendChild(projectCard);
      });
    }

    function loadCollaborations() {
      const collaborationsGrid = document.getElementById('collaborationsGrid');
      collaborationsGrid.innerHTML = '';
      
      collaborations.forEach((collab, index) => {
        const collabCard = document.createElement('div');
        collabCard.className = 'card';
        
        const statusColor = collab.status === 'complete' ? 'var(--success)' : 
                           collab.status === 'active' ? 'var(--primary-orange)' : 'var(--warning)';
        
        collabCard.innerHTML = `
          <h3>${collab.title}</h3>
          <p style="color: var(--primary-gold);">with ${collab.collaborator}</p>
          <p style="color: ${statusColor}; margin: 1rem 0;">Status: ${collab.status}</p>
          <div class="progress-container">
            <div class="progress-bar" style="width: ${collab.progress}%;"></div>
          </div>
          <p>Progress: ${collab.progress}%</p>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 1rem 0;">
            Due: ${collab.deadline} • Last activity: ${collab.lastActivity}
          </p>
          <button class="btn btn-small" onclick="openCollaboration(${index})">🎵 Open</button>
        `;
        collaborationsGrid.appendChild(collabCard);
      });
    }

    function showDashboardTab(tabName) {
      // Update tab buttons
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Update content
      document.querySelectorAll('.dashboard-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(tabName).classList.add('active');
    }

    function searchProjects(query) {
      const projectCards = document.querySelectorAll('.project-card');
      projectCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function filterProjects(status) {
      const projectCards = document.querySelectorAll('.project-card');
      projectCards.forEach((card, index) => {
        const project = projects[index];
        if (status === 'all' || project.status === status) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function shareProject(index) {
      const project = projects[index];
      showNotification(`📤 "${project.name}" shared successfully!`, 'success');
    }

    function viewStats(index) {
      const project = projects[index];
      alert(`📊 Stats for "${project.name}"\n\n▶️ ${formatNumber(project.plays)} total plays\n❤️ ${project.likes} likes\n📈 Growing 12% this week\n🌍 Top countries: Nigeria, Ghana, UK`);
    }

    function openCollaboration(index) {
      const collab = collaborations[index];
      alert(`🎵 Opening collaboration: "${collab.title}"\n\nWorking with ${collab.collaborator}\nProgress: ${collab.progress}%\nDue: ${collab.deadline}`);
    }

    // Profile Functions
    function loadProfile() {
      if (isLoggedIn && currentUser) {
        document.getElementById('profileName').textContent = currentUser.name;
        document.getElementById('profileAvatar').textContent = currentUser.avatar;
        document.getElementById('profileRole').textContent = currentUser.role || 'Afrobeat Creator';
        document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
      }
      loadUserTracks();
    }

    function loadUserTracks() {
      const userTracksGrid = document.getElementById('userTracksGrid');
      if (!userTracksGrid) return;
      
      userTracksGrid.innerHTML = '';
      
      // Show user's completed projects as tracks
      const userTracks = projects.filter(p => p.status === 'complete');
      
      userTracks.forEach(track => {
        const trackCard = document.createElement('div');
        trackCard.className = 'card';
        trackCard.innerHTML = `
          <h3>${track.name}</h3>
          <p style="color: var(--primary-gold);">${track.genre} • ${track.duration}</p>
          <p style="color: var(--text-secondary);">Released ${track.lastModified}</p>
          <div style="margin: 1rem 0;">
            <p style="color: var(--success);">▶️ ${formatNumber(track.plays)} plays • ❤️ ${track.likes} likes</p>
          </div>
          <button class="btn btn-small" onclick="playTrack('${track.name}')">▶️ Play</button>
        `;
        userTracksGrid.appendChild(trackCard);
      });
    }

    function editProfile() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      alert('✏️ Profile editing would open a detailed form here.');
    }

    function saveSettings() {
      showNotification('⚙️ Settings saved successfully!', 'success');
    }

    function playTrack(title) {
      showNotification(`▶️ Now playing: "${title}"`, 'success');
    }

    // Auth Functions
    function openModal() {
      document.getElementById('authModal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('authModal').classList.remove('active');
    }

    function toggleAuthMode() {
      const loginForm = document.getElementById('loginForm');
      const onboardingForm = document.getElementById('onboardingForm');
      
      isAuthModeLogin = !isAuthModeLogin;
      
      if (isAuthModeLogin) {
        loginForm.classList.add('active');
        onboardingForm.classList.remove('active');
        onboardingStep = 1;
        resetOnboardingSteps();
      } else {
        loginForm.classList.remove('active');
        onboardingForm.classList.add('active');
        showOnboardingStep(1);
      }
    }

    function showOnboardingStep(step) {
      document.querySelectorAll('.onboarding-steps').forEach(el => {
        el.classList.remove('active');
      });
      document.getElementById(`onboardingStep${step}`).classList.add('active');
      onboardingStep = step;
    }

    function nextOnboardingStep(step) {
      showOnboardingStep(step);
    }

    function resetOnboardingSteps() {
      document.querySelectorAll('.avatar-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      document.querySelectorAll('.role-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      document.querySelectorAll('.genre-tag').forEach(tag => {
        tag.classList.remove('selected');
      });
      selectedAvatar = '👩🏿‍🎤';
      selectedRole = '';
      selectedGenres = [];
    }

    function selectAvatar(avatar) {
      selectedAvatar = avatar;
      document.querySelectorAll('.avatar-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      event.target.classList.add('selected');
    }

    function selectRole(role) {
      selectedRole = role;
      document.querySelectorAll('.role-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      event.target.classList.add('selected');
    }

    function toggleGenre(element) {
      const genre = element.textContent;
      if (selectedGenres.includes(genre)) {
        selectedGenres = selectedGenres.filter(g => g !== genre);
        element.classList.remove('selected');
      } else {
        selectedGenres.push(genre);
        element.classList.add('selected');
      }
    }

    function completeOnboarding() {
      const name = document.getElementById('nameInput').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      
      if (!name || !email || !password || !selectedRole || selectedGenres.length === 0) {
        showNotification('Please complete all fields', 'error');
        return;
      }
      
      // Simulate authentication
      showLoading();
      
      setTimeout(() => {
        isLoggedIn = true;
        currentUser = { 
          email: email, 
          name: name,
          avatar: selectedAvatar,
          role: selectedRole === 'artist' ? 'Afrobeat Artist' : 
                selectedRole === 'producer' ? 'Afrobeat Producer' : 'Artist & Producer',
          genres: selectedGenres
        };
        
        // Update UI
        document.getElementById('authBtn').textContent = '🚪 Logout';
        document.getElementById('authBtn').onclick = logout;
        document.getElementById('userMenu').classList.add('logged-in');
        document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
        
        closeModal();
        hideLoading();
        
        showNotification(`🎉 Welcome to AfroVibe, ${currentUser.name}!`, 'success');
        
        // Clear form
        document.getElementById('nameInput').value = '';
        document.getElementById('signupEmail').value = '';
        document.getElementById('signupPassword').value = '';
        
        // Load user-specific content
        if (currentPage === 'profile') {
          loadProfile();
        }
      }, 1500);
    }

    function handleAuth() {
      const email = document.getElementById('emailInput').value;
      const password = document.getElementById('passwordInput').value;
      
      if (!email || !password) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      // Simulate authentication
      showLoading();
      
      setTimeout(() => {
        isLoggedIn = true;
        currentUser = { 
          email: email, 
          name: email.split('@')[0],
          avatar: '👩🏿‍🎤',
          role: 'Afrobeat Creator'
        };
        
        // Update UI
        document.getElementById('authBtn').textContent = '🚪 Logout';
        document.getElementById('authBtn').onclick = logout;
        document.getElementById('userMenu').classList.add('logged-in');
        document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();
        
        closeModal();
        hideLoading();
        
        showNotification(`🎉 Welcome back, ${currentUser.name}!`, 'success');
        
        // Clear form
        document.getElementById('emailInput').value = '';
        document.getElementById('passwordInput').value = '';
        
        // Load user-specific content
        if (currentPage === 'profile') {
          loadProfile();
        }
      }, 1500);
    }

    function logout() {
      isLoggedIn = false;
      currentUser = null;
      document.getElementById('authBtn').textContent = '🔐 Login';
      document.getElementById('authBtn').onclick = openModal;
      document.getElementById('userMenu').classList.remove('logged-in');
      showNotification('👋 Logged out successfully!', 'success');
    }

    function toggleUserMenu() {
      // Placeholder for user menu dropdown
      alert('User menu would show options:\n• Profile\n• Settings\n• Help\n• Logout');
    }

    // AI Assistant Functions
    function toggleAIPanel() {
      document.getElementById('aiPanel').classList.toggle('active');
    }

    function askAI() {
      const question = document.getElementById('aiInput').value;
      if (!question) return;
      
      const aiPanel = document.getElementById('aiPanel');
      const response = document.createElement('div');
      response.className = 'ai-message';
      
      // Simple AI responses based on keywords
      if (question.toLowerCase().includes('beat') || question.toLowerCase().includes('rhythm')) {
        response.textContent = "For authentic Afrobeat rhythms, try using the 'Traditional Afrobeat' style in the beat generator. Focus on the 4/4 clave pattern with syncopated guitar and horn accents.";
      } else if (question.toLowerCase().includes('melody')) {
        response.textContent = "Afrobeat melodies often use pentatonic scales with call-and-response patterns. Try recording a simple phrase, then duplicate it with variations for an authentic sound.";
      } else if (question.toLowerCase().includes('mix')) {
        response.textContent = "In Afrobeat, keep drums punchy (especially the kick and snare), guitars bright, and horns present but not overpowering. Use subtle reverb on vocals to create space.";
      } else if (question.toLowerCase().includes('structure')) {
        response.textContent = "Classic Afrobeat structure: Intro (8 bars), Verse (16 bars), Chorus (8 bars), Instrumental break (16 bars), Repeat. Add improvisation sections for solos.";
      } else {
        response.textContent = "I'm your Afrobeat AI assistant. Ask me about beat patterns, song structure, mixing tips, or anything about creating authentic Afrobeat music!";
      }
      
      aiPanel.insertBefore(response, document.getElementById('aiInput'));
      document.getElementById('aiInput').value = '';
      aiPanel.scrollTop = aiPanel.scrollHeight;
    }

    // Utility Functions
    function handleShare() {
      if (!isLoggedIn) {
        openModal();
        return;
      }
      showNotification('📤 Sharing features available in studio!', 'success');
      setTimeout(() => showPage('studio'), 1000);
    }

    // Initialize App
    document.addEventListener('DOMContentLoaded', function() {
      // Smooth scrolling navbar
      let lastScrollTop = 0;
      window.addEventListener('scroll', function() {
        let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const navbar = document.getElementById('navbar');
        
        if (scrollTop > lastScrollTop) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
        lastScrollTop = scrollTop;
      });
      
      // Initialize content
      setTimeout(() => {
        hideLoading();
        loadArtists();
        loadCourses();
        loadDashboard();
        initializeStudio();
        
        showNotification('🎵 Welcome to AfroVibe AI!', 'success');
      }, 1000);
      
      // Register Service Worker for PWA
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').then(registration => {
          console.log('ServiceWorker registration successful');
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      }
      
      // Trigger PWA install prompt
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        setTimeout(() => {
          if (confirm('Install AfroVibe AI as an app for better experience?')) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
              if (choiceResult.outcome === 'accepted') {
                console.log('User accepted install prompt');
              } else {
                console.log('User dismissed install prompt');
              }
              deferredPrompt = null;
            });
          }
        }, 5000);
      });
    });
  </script>
</body>
</html>
