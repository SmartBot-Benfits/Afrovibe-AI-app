<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AfroVibe AI Studio</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    /* ==== ROOT & RESET ==== */
    :root {
      --bg: #0d0d0d;
      --glass: rgba(255,255,255,0.05);
      --primary: #ff5500;
      --accent: #ffd700;
      --text: #f0f0f0;
      --text-secondary: #888;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Poppins', sans-serif; overflow-x:hidden; }

    /* ==== LOADER ==== */
    #loader { position:fixed; inset:0; background:#000; display:flex; align-items:center; justify-content:center; z-index:1000; }
    #loader span { color: var(--primary); font-size:1.2rem; animation:pulse 1.5s infinite; }
    @keyframes pulse {0%,100%{opacity:.7}50%{opacity:1;transform:scale(1.1);} }

    /* ==== NAVBAR ==== */
    header { position:fixed; top:0; width:100%; background: var(--glass); backdrop-filter:blur(10px); display:flex; align-items:center; justify-content:space-between; padding:1rem 2rem; z-index:900; }
    .logo { font-weight:600; font-size:1.5rem; background:linear-gradient(45deg,var(--primary),var(--accent)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; cursor:pointer; }
    nav { display:flex; gap:1rem; }
    nav a { color:var(--text); text-decoration:none; padding:.5rem 1rem; border-radius:6px; transition:.3s; }
    nav a.active, nav a:hover { background: var(--primary); }

    /* ==== CONTAINERS ==== */
    .page { display:none; padding:6rem 1rem 2rem; min-height:100vh; transition:.5s; }
    .page.active { display:block; }

    .container { max-width:600px; margin:0 auto; }

    /* ==== BUTTONS ==== */
    .btn { display:inline-block; background:var(--primary); color:#000; font-weight:600; padding:.75rem 1.5rem; border:none; border-radius:8px; cursor:pointer; transition:.3s; }
    .btn:hover { background:#ff3300; }

    /* ==== ONBOARDING ==== */
    #onboarding { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; text-align:center; gap:1rem; }
    #onboarding .avatar { width:100px; height:100px; border-radius:50%; border:2px solid var(--accent); background-size:cover; animation:pulse 2s infinite; }
    #onboarding input, #onboarding select { width:80%; padding:.75rem; border:none; border-radius:6px; background:#1a1a1a; color:#fff; }

    /* ==== STUDIO ==== */
    #studio .controls { display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center; margin-bottom:1rem;}
    #studio .controls .btn { flex:1 1 calc(50% - 1rem); }
    #waveform { margin-top:1rem; display:flex; gap:2px; justify-content:center; }

    #waveform .bar { width:5px; height:20px; background:var(--primary); animation:wave 1s infinite ease-in-out; }
    @keyframes wave { 0%{height:20px}50%{height:60px}100%{height:20px} }

    /* ==== CARDS & GLASS ==== */
    .card { background: var(--glass); backdrop-filter:blur(8px); border-radius:12px; padding:1rem; margin-bottom:1rem; }
    .title { font-size:1.5rem; margin-bottom:.5rem; color:var(--accent); }
    .description { color:var(--text-secondary); margin-bottom:1rem; }

    /* ==== FOOTER ==== */
    footer { text-align:center; padding:2rem 1rem; color:var(--text-secondary); font-size:.9rem; }

    /* ==== RESPONSIVE ==== */
    @media (max-width:600px) {
      header { padding:1rem; }
      .controls .btn { flex:1 1 100%; }
    }
  </style>
</head>
<body>
  <!-- LOADER -->
  <div id="loader"><span>‚öôÔ∏è Loading AfroVibe AI‚Ä¶</span></div>

  <!-- ONBOARDING -->
  <div id="onboarding" class="page">
    <div class="container">
      <h1>Welcome to AfroVibe AI</h1>
      <div class="avatar" id="avatarPreview" style="background-image:url('https://api.dicebear.com/7.x/pixel-art/svg?seed=User');"></div>
      <select id="avatarSelect">
        <option>User</option><option>Ava</option><option>Zion</option><option>Luna</option>
      </select>
      <input id="inputName" placeholder="Your Name" />
      <button class="btn" onclick="completeOnboard()">Continue</button>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="hidden">
    <header>
      <div class="logo" onclick="showPage('studio')">AfroVibe<span style="opacity:.7">AI</span></div>
      <nav>
        <a href="#" id="nav-studio"    onclick="showPage('studio')">Studio</a>
        <a href="#" id="nav-dashboard" onclick="showPage('dashboard')">Dashboard</a>
        <a href="#" id="nav-community" onclick="showPage('community')">Community</a>
        <a href="#" id="nav-learn"     onclick="showPage('learn')">Learn</a>
        <a href="#" id="nav-profile"   onclick="showPage('profile')">Profile</a>
      </nav>
    </header>

    <!-- STUDIO -->
    <section id="studio" class="page">
      <div class="container">
        <div class="title">üéõÔ∏è AI Beat Studio</div>
        <div class="description">Describe your beat or press Generate</div>
        <input id="beatPrompt" placeholder="e.g. Chill Afrobeat with soft kicks" />
        <div class="controls">
          <button class="btn" onclick="generateBeat()">Generate Beat</button>
          <button class="btn" onclick="saveProject()">Save Project</button>
        </div>
        <div id="waveform"></div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard" class="page">
      <div class="container">
        <div class="title">üìä Your Projects</div>
        <div id="projectsList"></div>
      </div>
    </section>

    <!-- COMMUNITY -->
    <section id="community" class="page">
      <div class="container">
        <div class="title">üåç Global Community</div>
        <div class="card">Coming Soon: Share & Discover Tracks!</div>
      </div>
    </section>

    <!-- LEARN -->
    <section id="learn" class="page">
      <div class="container">
        <div class="title">üéì Learn Afrobeat AI</div>
        <div class="card">Interactive Tutorials & Challenges</div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="profile" class="page">
      <div class="container">
        <div class="title">üë§ Your Profile</div>
        <div class="card">Name: <span id="profileName"></span></div>
        <div class="card avatar" id="profileAvatar" style="width:80px; height:80px; margin:auto;"></div>
      </div>
    </section>

    <footer>¬© 2025 AfroVibe AI ‚Ä¢ Mobile-First Afro-Futuristic Music Lab</footer>
  </div>

  <!-- MAGENTA.JS for Mock AI -->
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/music.js"></script>
  <script>
    // INITIAL LOAD & NAV
    window.onload = () => {
      setTimeout(() => {
        document.getElementById('loader').remove();
        // show onboarding if first time, else go to studio
        if (!localStorage.getItem('afrovibeUser')) {
          showPage('onboarding');
        } else {
          loadProfile();
          showPage('studio');
          document.getElementById('app').classList.remove('hidden');
        }
      }, 1000);
    };
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.getElementById('app').classList.remove('hidden');
      // update nav
      ['studio','dashboard','community','learn','profile'].forEach(s=>{
        document.getElementById('nav-'+s).classList.toggle('active', s===id);
      });
    }

    // ONBOARDING
    document.getElementById('avatarSelect').onchange = (e)=>{
      document.getElementById('avatarPreview').style.backgroundImage =
        `url('https://api.dicebear.com/7.x/pixel-art/svg?seed=${e.target.value}')`;
    };
    function completeOnboard() {
      const name = document.getElementById('inputName').value.trim();
      if(!name) return alert('Enter your name');
      localStorage.setItem('afrovibeUser', JSON.stringify({
        name, avatar: document.getElementById('avatarSelect').value
      }));
      loadProfile();
      showPage('studio');
    }

    // PROFILE
    function loadProfile() {
      const user = JSON.parse(localStorage.getItem('afrovibeUser') || '{}');
      if(user.name) {
        document.getElementById('profileName').innerText = user.name;
        document.getElementById('profileAvatar').style.backgroundImage =
          `url('https://api.dicebear.com/7.x/pixel-art/svg?seed=${user.avatar}')`;
      }
    }

    // PROJECTS
    let projects = JSON.parse(localStorage.getItem('afrovibeProjects')||'[]');
    function saveProject() {
      const prompt = document.getElementById('beatPrompt').value||'Untitled Beat';
      const project = { id:Date.now(), prompt, timestamp: new Date().toLocaleString() };
      projects.unshift(project);
      localStorage.setItem('afrovibeProjects', JSON.stringify(projects));
      renderProjects();
      alert('Project saved! You can download after finalizing.');
    }
    function renderProjects() {
      const list = document.getElementById('projectsList');
      list.innerHTML = '';
      projects.forEach(p => {
        const div = document.createElement('div');
        div.className='card';
        div.innerHTML = `<strong>${p.prompt}</strong><br/><small>${p.timestamp}</small>`;
        list.appendChild(div);
      });
    }
    window.addEventListener('load',renderProjects);

    // MOCK AI BEAT GENERATION (Magenta.js stub)
    async function generateBeat() {
      const waveform = document.getElementById('waveform');
      waveform.innerHTML = '';
      // create 20 bars with random heights
      for(let i=0;i<20;i++){
        const bar = document.createElement('div');
        bar.className='bar';
        bar.style.animationDelay = `${i*0.1}s`;
        waveform.appendChild(bar);
      }
      // In real: integrate mm.Player().start(seq);
    }
  </script>
</body>
</html>
